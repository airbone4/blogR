<!DOCTYPE html>
<html><head>
  <title>10. tidyr, dplyr basic</title>  
      
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href='../images/favicon.ico'/>
      
    <link rel="stylesheet" href="../css/atom-one-dark-reasonable.css">
    
    <link href="../css/syntax.css?1636607466" rel="stylesheet">
    <script src="../js/jquery-3.3.1.min.js?1636607466"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    
    <script src='../js/datatables.min.js'></script>    
    <link href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css" rel="stylesheet">    
    
    <link href="../css/fontawesome-all.min.css?1636607466" rel="stylesheet">
    
    <link href="../css/theme-mine.css?1636607466" rel="stylesheet">
    
    <link href="../css/theme.css?1636607466" rel="stylesheet">
    
    
    <link rel="stylesheet" href="../scss/notice.7158afc7a24ea3d0073077b3699dbfad7f3df2be8d4e19956e934587413013ee.css" integrity="sha256-cVivx6JOo9AHMHezaZ2/rX898r6NThmVbpNFh0EwE&#43;4=">

    
  </head><body><div id="top-pane" class="navbar  fixed-top ">
  <div class="container-fluid">
  <span >
    <a  href='../' class="fs-5 accessory"><i class="fas fa-home"></i>R in Class</a>
    <span id="sidebar-toggle-span" class="fs-5"><i class="fas fa-align-justify"></i></span>
  </span><span >
      <span id="toc-menu">
    <label><i class="fas fa-list-alt" ></i> </label>    
<div id="variant-toc-content" >
    <div class="wrapper">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#long-and-wide-data">long and wide data</a>
      <ul>
        <li><a href="#寬變長">寬變長</a></li>
        <li><a href="#長到寬資料">長到寬資料</a></li>
      </ul>
    </li>
    <li><a href="#dplyr-的向量函數">dplyr 的向量函數</a>
      <ul>
        <li><a href="#subset">subset</a></li>
        <li><a href="#分組">分組</a></li>
        <li><a href="#報告">報告</a></li>
      </ul>
    </li>
    <li><a href="#實驗-pipeline-vs-no-pipeline">實驗 pipeline vs no pipeline</a></li>
    <li><a href="#練習">練習</a></li>
  </ul>
</nav>
    </div>
    <hr class="p-0 m-0" />
    <div class="toa"></div>
</div>
</span>
<span class="fs-5 accessory" data-bs-toggle="tooltip" data-bs-placement="bottom" 
      title='最後修改November 3, 2021'>10. tidyr, dplyr basic</span>
        
    

    </span>
  
  <span></span><span >
    <span >
    <label for="search-query" id="search-button"><i class="fas fa-search"></i></label>
    <input id="search-query" type="search" placeholder="搜尋" autocomplete="off">
</span>    
 
<div id="search-pane">
 <ol id="search-results"></ul>
</div>

    </span>
</div> 
</div>


<div id="content-wrapper"><nav id="sidebar">
  
    <ul class="nav flex-column topics" id="home-topics">
      
        
          
          


 

<li class="nav-item" data-bs-toggle="tooltip" data-bs-placement="right" title="基礎R">
     

  <a class="nav-link" 
    href="../rlang.html"><i class="far fa-folder"></i>基礎R  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_92db98bffe2d6697b3536cbbf7b00074" aria-expanded="false">
      <i class="fas fa-caret-up pairicon-open"></i>
      <i class="fas fa-caret-down pairicon-close"></i>
    </span>
  <ul id="menu_item_92db98bffe2d6697b3536cbbf7b00074"  
  class="submenu collapse show" 
  data-bs-parent="#home-topics">

    
  
  
   
   
        <li class="nav-item"><a class="nav-link" href="../rlang/1_0_requirement.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1 Requirement</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/1_1_%E7%B3%BB%E7%B5%B1.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1 運作環境</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/1_2_filesystem.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2 檔案系統</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/1_3_%E5%9F%B7%E8%A1%8C.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3 執行</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/1_4_rpackages.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4 R Package</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/1_5_%E7%B7%A8%E7%A2%BC.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5 編碼</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/2_0_%E8%BC%B8%E5%87%BA%E8%BC%B8%E5%85%A5.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0 基本輸出輸入</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/2_1_%E8%AE%80%E6%AA%94%E5%AF%AB%E6%AA%94.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1 讀檔寫檔</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/2_2_data_explorer.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2 資料探索</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/2_3_data_explorer.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.3 資料探索</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/3_quickview1.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3. Quick view 1</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/4_1_1_type_%E5%9F%BA%E6%9C%AC.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.1 基本</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/4_1_2_type%E7%B7%B4%E7%BF%92.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.1.2 練習</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/4_2_type_vector.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.2 向量</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/4_3_type_matrix.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.3 矩陣</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/4_4_type_list.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.4 串列 list</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/4_5_type_string_function.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.5 字串處理函數</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/4_6_type_dataframe.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.6 資料集 data frame</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/4_7_type_factor.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.7 因子</a></li>
     
   
     
   
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/4_15_json.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.15 json</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/6_1_programming.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">6.1 Programming basic</a></li>
     
   
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/6_3_apply_family.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">6.3 function - apply family</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/7_1_function.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">7.1 R 函數的基本撰寫</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/7_2_function.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">7.2 更多R函數</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/7_3_function.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">7.3 R 函數定義的幾種分類</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/7_8_objectbasic.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">7.8 R的物件相關概念</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/7_9_%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91s3.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">7.9 物件導向S3</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/9_1_plot.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">9.1 基本繪圖</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/9_2_%E5%A4%9A%E5%9C%96%E7%96%8A%E5%9C%96.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">9.2 多圖疊圖</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/9_3_plot.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">9.3 畫圖練習</a></li>
     
    
        <li class="nav-item active"><a class="nav-link" href="../rlang/10_00_dplyrbasic01.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">10. tidyr, dplyr basic</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/11_00_sampling.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">11. sampling</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/11_environments.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">11 Environments</a></li>
     
   
     
   
     
   
        <li>


 

<li class="nav-item" data-bs-toggle="tooltip" data-bs-placement="right" title="暫時">
     

  <a class="nav-link" 
    href="../rlang/demo.html"><i class="far fa-folder"></i>暫時  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_f03d3d24b564dd9c39af6eb86300021f" aria-expanded="false">
      <i class="fas fa-caret-up pairicon-open"></i>
      <i class="fas fa-caret-down pairicon-close"></i>
    </span>
  <ul id="menu_item_f03d3d24b564dd9c39af6eb86300021f"  
  class="submenu collapse" 
  data-bs-parent="#menu_item_92db98bffe2d6697b3536cbbf7b00074">

    
  
  
   
   
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/demo/citation.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">引用</a></li>
    </ul>
</li>
     
  
</li>
     
   
        <li>


 

<li class="nav-item" data-bs-toggle="tooltip" data-bs-placement="right" title="練習用">
     

  <a class="nav-link" 
    href="../rlang/hw.html"><i class="far fa-folder"></i>練習用  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_b4809f6375b9dda8660e4938c2644e82" aria-expanded="false">
      <i class="fas fa-caret-up pairicon-open"></i>
      <i class="fas fa-caret-down pairicon-close"></i>
    </span>
  <ul id="menu_item_b4809f6375b9dda8660e4938c2644e82"  
  class="submenu collapse" 
  data-bs-parent="#menu_item_92db98bffe2d6697b3536cbbf7b00074">

    
  
  
   
   
        <li class="nav-item"><a class="nav-link" href="../rlang/hw/hw_basic.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">assignment-1</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/hw/hw_regexp.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">regexpr</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/hw/hw_filesystem.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">檔案系統</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/hw/dataset_class.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">資料集</a></li>
    </ul>
</li>
     
  
</li>
     
   
        <li class="nav-item"><a class="nav-link" href="../rlang/resources.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">練習相關檔案</a></li>
    </ul>
</li>
     
  

        
          
          


 

<li class="nav-item" data-bs-toggle="tooltip" data-bs-placement="right" title="基礎計量">
     

  <a class="nav-link" 
    href="../econometrics.html"><i class="far fa-folder"></i>基礎計量  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_c59a6b16a979dae063e00e4a916e3284" aria-expanded="false">
      <i class="fas fa-caret-up pairicon-open"></i>
      <i class="fas fa-caret-down pairicon-close"></i>
    </span>
  <ul id="menu_item_c59a6b16a979dae063e00e4a916e3284"  
  class="submenu collapse" 
  data-bs-parent="#home-topics">

    
  
  
   
   
        <li class="nav-item"><a class="nav-link" href="../econometrics/0_prerequest.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0 前置準備</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../econometrics/1_t%E6%AA%A2%E5%AE%9A.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0 t檢定</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../econometrics/2_anova.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2. ANOVA</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../econometrics/a_a_%E8%B3%87%E6%96%99%E8%99%95%E7%90%86.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">A.a 資料處理</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../econometrics/a_b_mpg%E7%82%BA%E4%BE%8B%E7%9A%84ggplot.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">A.b mpg為例的ggplot</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../econometrics/lmm.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">lmm</a></li>
     
   
    </ul>
</li>
     
  

        
          
          


 

<li class="nav-item" data-bs-toggle="tooltip" data-bs-placement="right" title="專題">
     

  <a class="nav-link" 
    href="../topic.html"><i class="far fa-folder"></i>專題  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_f7b6d4231ab239a316b7f2d9edf32817" aria-expanded="false">
      <i class="fas fa-caret-up pairicon-open"></i>
      <i class="fas fa-caret-down pairicon-close"></i>
    </span>
  <ul id="menu_item_f7b6d4231ab239a316b7f2d9edf32817"  
  class="submenu collapse" 
  data-bs-parent="#home-topics">

    
  
  
   
   
     
   
        <li>


 

<li class="nav-item" data-bs-toggle="tooltip" data-bs-placement="right" title="實驗">
     

  <a class="nav-link" 
    href="../topic/simulation.html"><i class="far fa-folder"></i>實驗  </a>
    <span class="ps-1" data-bs-toggle="collapse" data-bs-target="#menu_item_e617bdc52da54290f99855ac9d5037aa" aria-expanded="false">
      <i class="fas fa-caret-up pairicon-open"></i>
      <i class="fas fa-caret-down pairicon-close"></i>
    </span>
  <ul id="menu_item_e617bdc52da54290f99855ac9d5037aa"  
  class="submenu collapse" 
  data-bs-parent="#menu_item_f7b6d4231ab239a316b7f2d9edf32817">

    
  
  
   
   
        <li class="nav-item"><a class="nav-link" href="../topic/simulation/2_1_%E9%9A%A8%E6%A9%9F%E8%AE%8A%E6%95%B8.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1 隨機變數</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../topic/simulation/2_1_%E4%BA%82%E6%95%B8%E5%87%BD%E6%95%B8%E7%B7%B4%E7%BF%92.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.1 亂數函數練習</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../topic/simulation/4_01_sim.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.1 模擬基本 1</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../topic/simulation/4_02_sim.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.2 模擬基本 2</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../topic/simulation/mc_%E5%9F%BA%E6%9C%AC.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">MC_基本</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../topic/simulation/poisson%E5%88%86%E9%85%8D.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">Poisson分配</a></li>
     
   
        <li class="nav-item"><a class="nav-link" href="../topic/simulation/central.html" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">中央</a></li>
    </ul>
</li>
     
  
</li>
     
   
    </ul>
</li>
     
  

          
        
  </ul> 
    
    <hr/>
    <section id="footer">
      最近3篇<br/><ul><li><a href="../rlang/9_1_plot.html"> <i class="far fa-clock" ></i>9.1 基本繪圖[2021-11-11 PM 01:10]</a></li><li><a href="../rlang/9_2_%E5%A4%9A%E5%9C%96%E7%96%8A%E5%9C%96.html"> <i class="far fa-clock" ></i>9.2 多圖疊圖[2021-11-11 PM 01:10]</a></li><li><a href="../rlang/1_1_%E7%B3%BB%E7%B5%B1.html"> <i class="far fa-clock" ></i>1.1 運作環境[2021-11-04 AM 10:11]</a></li></ul>
    </section>
  
</nav><article class="article mx-2 mt-3" id="body-inner">
    <ul>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">cheat sheet</a></li>
</ul>
<pre><code class="language-r?preclass=.ms-5.w-75">需要安裝babynames,ggplot2
</code></pre>
<p><img src="10_00_dplyrBasic01.files/reshape.png" alt=""></p>
<h2 id="long-and-wide-data">long and wide data</h2>
<h3 id="寬變長">寬變長</h3>
<p>函數<code>gather()</code>: 寬變長
From <a href="http://stackoverflow.com/questions/1181060">http://stackoverflow.com/questions/1181060</a></p>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">require(tidyr)
require(dplyr) # tibble
# 每個時間點(共10個),產生3個股票,X,Y,Z
 stocks &lt;- tibble( #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏也可以用data.frame">🏷</span><!--/html_preserve-->
  time = as.Date('2009-01-01') + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)
kable(head(stocks)) #
</code></pre>
<!--html_preserve--><div class="message"><button class='btn-primary p-0 fs-6' data-bs-toggle="collapse" data-bs-target="#n794318265">
展/縮</button><div  id="n794318265" class="collapse" style="overflow-x:auto"><!--/html_preserve--><table>
<thead>
<tr>
<th style="text-align:left">time</th>
<th style="text-align:right">X</th>
<th style="text-align:right">Y</th>
<th style="text-align:right">Z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">2009-01-01</td>
<td style="text-align:right">0.6778663</td>
<td style="text-align:right">0.7513016</td>
<td style="text-align:right">-9.9708545</td>
</tr>
<tr>
<td style="text-align:left">2009-01-02</td>
<td style="text-align:right">-0.2238161</td>
<td style="text-align:right">-2.1862983</td>
<td style="text-align:right">0.6832973</td>
</tr>
<tr>
<td style="text-align:left">2009-01-03</td>
<td style="text-align:right">-0.1217276</td>
<td style="text-align:right">-0.0860699</td>
<td style="text-align:right">-0.1664718</td>
</tr>
<tr>
<td style="text-align:left">2009-01-04</td>
<td style="text-align:right">-0.3546435</td>
<td style="text-align:right">0.2440224</td>
<td style="text-align:right">7.4886484</td>
</tr>
<tr>
<td style="text-align:left">2009-01-05</td>
<td style="text-align:right">0.3119788</td>
<td style="text-align:right">-1.5312788</td>
<td style="text-align:right">-3.7477823</td>
</tr>
<tr>
<td style="text-align:left">2009-01-06</td>
<td style="text-align:right">-0.5437336</td>
<td style="text-align:right">-1.1486502</td>
<td style="text-align:right">4.7369778</td>
</tr>
</tbody>
</table>
<!--html_preserve--></div></div><!--/html_preserve-->
<pre><code class="language-r?lang=r?class=.output?preclass=ms-5.w-75">

kable(gather(stocks, stock, price, -time)) #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏除了時間欄位以外,其餘欄位依序填到兩個新欄位,分別是1)分組欄位(stock)和2)數值欄位(price)">🏷</span><!--/html_preserve--> 
</code></pre>
<!--html_preserve--><div class="message"><button class='btn-primary p-0 fs-6' data-bs-toggle="collapse" data-bs-target="#n283719546">
展/縮</button><div  id="n283719546" class="collapse" style="overflow-x:auto"><!--/html_preserve--><table>
<thead>
<tr>
<th style="text-align:left">time</th>
<th style="text-align:left">stock</th>
<th style="text-align:right">price</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">2009-01-01</td>
<td style="text-align:left">X</td>
<td style="text-align:right">0.6778663</td>
</tr>
<tr>
<td style="text-align:left">2009-01-02</td>
<td style="text-align:left">X</td>
<td style="text-align:right">-0.2238161</td>
</tr>
<tr>
<td style="text-align:left">2009-01-03</td>
<td style="text-align:left">X</td>
<td style="text-align:right">-0.1217276</td>
</tr>
<tr>
<td style="text-align:left">2009-01-04</td>
<td style="text-align:left">X</td>
<td style="text-align:right">-0.3546435</td>
</tr>
<tr>
<td style="text-align:left">2009-01-05</td>
<td style="text-align:left">X</td>
<td style="text-align:right">0.3119788</td>
</tr>
<tr>
<td style="text-align:left">2009-01-06</td>
<td style="text-align:left">X</td>
<td style="text-align:right">-0.5437336</td>
</tr>
<tr>
<td style="text-align:left">2009-01-07</td>
<td style="text-align:left">X</td>
<td style="text-align:right">0.1571257</td>
</tr>
<tr>
<td style="text-align:left">2009-01-08</td>
<td style="text-align:left">X</td>
<td style="text-align:right">-1.4585921</td>
</tr>
<tr>
<td style="text-align:left">2009-01-09</td>
<td style="text-align:left">X</td>
<td style="text-align:right">1.1313788</td>
</tr>
<tr>
<td style="text-align:left">2009-01-10</td>
<td style="text-align:left">X</td>
<td style="text-align:right">-1.1935117</td>
</tr>
<tr>
<td style="text-align:left">2009-01-01</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">0.7513016</td>
</tr>
<tr>
<td style="text-align:left">2009-01-02</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">-2.1862983</td>
</tr>
<tr>
<td style="text-align:left">2009-01-03</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">-0.0860699</td>
</tr>
<tr>
<td style="text-align:left">2009-01-04</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">0.2440224</td>
</tr>
<tr>
<td style="text-align:left">2009-01-05</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">-1.5312788</td>
</tr>
<tr>
<td style="text-align:left">2009-01-06</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">-1.1486502</td>
</tr>
<tr>
<td style="text-align:left">2009-01-07</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">1.6882895</td>
</tr>
<tr>
<td style="text-align:left">2009-01-08</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">-4.4474627</td>
</tr>
<tr>
<td style="text-align:left">2009-01-09</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">1.1243285</td>
</tr>
<tr>
<td style="text-align:left">2009-01-10</td>
<td style="text-align:left">Y</td>
<td style="text-align:right">-2.4531855</td>
</tr>
<tr>
<td style="text-align:left">2009-01-01</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">-9.9708545</td>
</tr>
<tr>
<td style="text-align:left">2009-01-02</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">0.6832973</td>
</tr>
<tr>
<td style="text-align:left">2009-01-03</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">-0.1664718</td>
</tr>
<tr>
<td style="text-align:left">2009-01-04</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">7.4886484</td>
</tr>
<tr>
<td style="text-align:left">2009-01-05</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">-3.7477823</td>
</tr>
<tr>
<td style="text-align:left">2009-01-06</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">4.7369778</td>
</tr>
<tr>
<td style="text-align:left">2009-01-07</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">5.3013235</td>
</tr>
<tr>
<td style="text-align:left">2009-01-08</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">-0.6878305</td>
</tr>
<tr>
<td style="text-align:left">2009-01-09</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">4.0872611</td>
</tr>
<tr>
<td style="text-align:left">2009-01-10</td>
<td style="text-align:left">Z</td>
<td style="text-align:right">-6.7961287</td>
</tr>
</tbody>
</table>
<!--html_preserve--></div></div><!--/html_preserve-->
<pre><code class="language-r?lang=r?class=.output?preclass=ms-5.w-75">
stocks %&gt;% gather(stock, price, -time) # <!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏也可以用管道寫法 &lt;code&gt;stocks %&amp;gt;% gather(stock, price, -time)&lt;/code&gt;">🏷</span><!--/html_preserve--> <!--html_preserve--><div class="message ms-0 "><button class='btn-primary p-0 fs-6' data-bs-toggle="collapse" data-bs-target="#n582461379">
展/縮</button><div  id="n582461379" class="collapse" style="overflow-x:auto"><!--/html_preserve-->#&gt; # A tibble: 30 x 3
#&gt;    time       stock  price
#&gt;    &lt;date&gt;     &lt;chr&gt;  &lt;dbl&gt;
#&gt;  1 2009-01-01 X      0.678
#&gt;  2 2009-01-02 X     -0.224
#&gt;  3 2009-01-03 X     -0.122
#&gt;  4 2009-01-04 X     -0.355
#&gt;  5 2009-01-05 X      0.312
#&gt;  6 2009-01-06 X     -0.544
#&gt;  7 2009-01-07 X      0.157
#&gt;  8 2009-01-08 X     -1.46 
#&gt;  9 2009-01-09 X      1.13 
#&gt; 10 2009-01-10 X     -1.19 
#&gt; # ... with 20 more rows<!--html_preserve--></div></div><!--/html_preserve-->
</code></pre>
<div class="notices  d-none ">
    <div class="info">
        <p>🐱‍👤直接寫出html : 利用<code>writeLines()</code>,例如設定css
設定css</p>
<pre><code class="language-r">writeLines(&quot;td, th { padding : 6px } th { background-color : brown ; color : white; border : 1px solid white; } td { color : brown ; border : 1px solid brown }&quot;, con = &quot;tableStyle.css&quot;)
kable(head(mtcars))
</code></pre>

    </div>
</div>

<h3 id="長到寬資料">長到寬資料</h3>
<p>利用函數<code>spread()</code></p>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">long&lt;-gather(stocks, stock, price, -time) #轉成長資料
str(long)
#&gt; tibble [30 x 3] (S3: tbl_df/tbl/data.frame)
#&gt;  $ time : Date[1:30], format: &quot;2009-01-01&quot; &quot;2009-01-02&quot; ...
#&gt;  $ stock: chr [1:30] &quot;X&quot; &quot;X&quot; &quot;X&quot; &quot;X&quot; ...
#&gt;  $ price: num [1:30] 0.678 -0.224 -0.122 -0.355 0.312 ...
wide &lt;-spread(long,stock,price) #轉成寬資料
str(wide)
#&gt; tibble [10 x 4] (S3: tbl_df/tbl/data.frame)
#&gt;  $ time: Date[1:10], format: &quot;2009-01-01&quot; &quot;2009-01-02&quot; ...
#&gt;  $ X   : num [1:10] 0.678 -0.224 -0.122 -0.355 0.312 ...
#&gt;  $ Y   : num [1:10] 0.7513 -2.1863 -0.0861 0.244 -1.5313 ...
#&gt;  $ Z   : num [1:10] -9.971 0.683 -0.166 7.489 -3.748 ...
head(wide)
#&gt; # A tibble: 6 x 4
#&gt;   time            X       Y      Z
#&gt;   &lt;date&gt;      &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
#&gt; 1 2009-01-01  0.678  0.751  -9.97 
#&gt; 2 2009-01-02 -0.224 -2.19    0.683
#&gt; 3 2009-01-03 -0.122 -0.0861 -0.166
#&gt; 4 2009-01-04 -0.355  0.244   7.49 
#&gt; 5 2009-01-05  0.312 -1.53   -3.75 
#&gt; 6 2009-01-06 -0.544 -1.15    4.74
</code></pre>
<p>更多參考:
<a href="http://www.cookbook-r.com/Manipulating_data/Converting_data_between_wide_and_long_format/">cookbook for R</a></p>
<h2 id="dplyr-的向量函數">dplyr 的向量函數</h2>
<p>函數名 功能</p>
<ul>
<li>
<p><code>row_number()</code> 排序(😒不是紀錄號碼),如果數值一樣,則靠前出現的元素排名在前,例如(3,3) 則 1,2</p>
</li>
<li>
<p><code>min_rank()</code> 排序,如果數值一樣,則都是同一等級，但是，佔用下一名次。例如</p>
<pre><code class="language-r">data&lt;-c(3,3,4)  
min_rank(data)
#&gt; [1] 1 1 3 #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏沒有2">🏷</span><!--/html_preserve-->
</code></pre>
</li>
<li>
<p><code>dense_rank()</code> 排序,如果數值一樣,則都是同一等級，但是，<code>不</code>佔用下一名次</p>
<pre><code class="language-r">data&lt;-c(3,3,4)  
dense_rank(data)
#&gt; [1] 1 1 2
</code></pre>
</li>
<li>
<p><code>percent_rank()</code> 按百分比的排名</p>
<pre><code class="language-r">percent_rank = (min_rank(x) - 1)/(sum(!is.na(x)) - 1)   
</code></pre>
</li>
<li>
<p><code>cume_dist()</code> 累計分佈</p>
</li>
<li>
<p><code>ntile()</code> : <code>floor(n * (row_number(x) - 1)/len + 1) </code></p>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">data&lt;-round(runif(10)*10)
pr&lt;-percent_rank(data)
cd&lt;-cume_dist(data)
mr&lt;-min_rank(data)
df&lt;-data.frame(data,pr,mr,cd)
arrange(df,data)
</code></pre>

  
















<!--html_preserve--><div   class="table-responsive kable">
<table  class="ms-5 w-75">
<thead  class="">
<tr >
<th  style="text-align:right">data</th>
<th  style="text-align:right">pr</th>
<th  style="text-align:right">mr</th>
<th  style="text-align:right">cd</th>
</tr>
</thead>
<tbody >
<tr >
<td  style="text-align:right">0</td>
<td  style="text-align:right">0.0000000</td>
<td  style="text-align:right">1</td>
<td  style="text-align:right">0.1</td>
</tr>
<tr >
<td  style="text-align:right">1</td>
<td  style="text-align:right">0.1111111</td>
<td  style="text-align:right">2</td>
<td  style="text-align:right">0.2</td>
</tr>
<tr >
<td  style="text-align:right">3</td>
<td  style="text-align:right">0.2222222</td>
<td  style="text-align:right">3</td>
<td  style="text-align:right">0.4</td>
</tr>
<tr >
<td  style="text-align:right">3</td>
<td  style="text-align:right">0.2222222</td>
<td  style="text-align:right">3</td>
<td  style="text-align:right">0.4</td>
</tr>
<tr >
<td  style="text-align:right">4</td>
<td  style="text-align:right">0.4444444</td>
<td  style="text-align:right">5</td>
<td  style="text-align:right">0.5</td>
</tr>
<tr >
<td  style="text-align:right">6</td>
<td  style="text-align:right">0.5555556</td>
<td  style="text-align:right">6</td>
<td  style="text-align:right">0.6</td>
</tr>
<tr >
<td  style="text-align:right">7</td>
<td  style="text-align:right">0.6666667</td>
<td  style="text-align:right">7</td>
<td  style="text-align:right">0.8</td>
</tr>
<tr >
<td  style="text-align:right">7</td>
<td  style="text-align:right">0.6666667</td>
<td  style="text-align:right">7</td>
<td  style="text-align:right">0.8</td>
</tr>
<tr >
<td  style="text-align:right">8</td>
<td  style="text-align:right">0.8888889</td>
<td  style="text-align:right">9</td>
<td  style="text-align:right">0.9</td>
</tr>
<tr >
<td  style="text-align:right">10</td>
<td  style="text-align:right">1.0000000</td>
<td  style="text-align:right">10</td>
<td  style="text-align:right">1.0</td>
</tr>
</tbody>
</table>

</div><!--/html_preserve-->
</li>
</ul>
<p>其他範例</p>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">x &lt;- c(5, 1, 3, 2, 2, NA)
row_number(x)
#&gt; [1]  5  1  4  2  3 NA
min_rank(x)
#&gt; [1]  5  1  4  2  2 NA
dense_rank(x)
#&gt; [1]  4  1  3  2  2 NA
percent_rank(x)
#&gt; [1] 1.00 0.00 0.75 0.25 0.25   NA
cume_dist(x)
#&gt; [1] 1.0 0.2 0.8 0.6 0.6  NA

ntile(x, 2)
#&gt; [1]  2  1  2  1  1 NA
ntile(1:8, 3)
#&gt; [1] 1 1 1 2 2 2 3 3
</code></pre>
<p>note:</p>
<p>(2,3,3,3,3,4,5,6,6,9)</p>
<table>
<thead>
<tr>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>4</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<div class="notices ms-5">
    <div class="info">
        <pre><code class="language-r">arrange(dataframe, col1, col2, col3)  
vs.  
dataframe[order(dataframe$col1, dataframe$col2, dataframe$col3), ]
vs.  
with(dataframe, dataframe[order(col1, col2, col3), ])  
</code></pre>

    </div>
</div>

<p><!--html_preserve--><div class="position-relative warning"><!--/html_preserve--><p>rank等級想要由大到小可以像下面這樣</p>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">data
#&gt;  [1]  1  8 10  0  7  6  3  3  4  7
row_number(desc(data))
#&gt;  [1]  9  2  1 10  3  5  7  8  6  4
</code></pre>
<p>❓探討為甚麼?</p>
<!--html_preserve--><button type="button" class="btn btn-primary position-absolute top-0 end-0 p-0" 
    data-bs-toggle="collapse" data-bs-target="#quiz-02135">提示</button>
</div><!--/html_preserve-->
<!--html_preserve--><div class="collapse info" id="quiz-02135"><!--/html_preserve--><pre><code class="language-r">desc(data)
#&gt;  [1] -7 -4 -1 -6 -4 -8 -9 -3 -1 -2 #&lt;!--html_preserve--&gt;&lt;span  data-bs-toggle=&quot;tooltip&quot; data-bs-html=&quot;true&quot;
title=&quot;👏原來的資料變成負數&quot;&gt;🏷&lt;/span&gt;&lt;!--/html_preserve--&gt;
row_number(data)
#&gt;  [1]  8  5  1  7  6  9 10  4  2  3
</code></pre>
<!--html_preserve--></div><!--/html_preserve--></p>
<div class="notices ms-5">
    <div class="info">
        <p>複習一下Percentile</p>
<p>❓Find the 32nd, 57th and 98th percentiles of runiform(200).</p>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">data&lt;-runif(200) 
quantile(data, c(.32, .57, .98)) 
#&gt;       32%       57%       98% 
#&gt; 0.2398605 0.5510189 0.9456776
</code></pre>

    </div>
</div>

<h3 id="subset">subset</h3>
<p><img src="10_00_dplyrBasic01.files/subset.png" alt=""></p>
<ul>
<li>select()選欄位</li>
<li>filter()選紀錄</li>
</ul>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">library(babynames)
babynames 
#&gt; # A tibble: 1,924,665 x 5
#&gt;     year sex   name          n   prop
#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;
#&gt;  1  1880 F     Mary       7065 0.0724
#&gt;  2  1880 F     Anna       2604 0.0267
#&gt;  3  1880 F     Emma       2003 0.0205
#&gt;  4  1880 F     Elizabeth  1939 0.0199
#&gt;  5  1880 F     Minnie     1746 0.0179
#&gt;  6  1880 F     Margaret   1578 0.0162
#&gt;  7  1880 F     Ida        1472 0.0151
#&gt;  8  1880 F     Alice      1414 0.0145
#&gt;  9  1880 F     Bertha     1320 0.0135
#&gt; 10  1880 F     Sarah      1288 0.0132
#&gt; # ... with 1,924,655 more rows

babynames %&gt;% select(-prop) #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏一個有五個欄位,扣掉欄位prop">🏷</span><!--/html_preserve-->
#&gt; # A tibble: 1,924,665 x 4
#&gt;     year sex   name          n
#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;
#&gt;  1  1880 F     Mary       7065
#&gt;  2  1880 F     Anna       2604
#&gt;  3  1880 F     Emma       2003
#&gt;  4  1880 F     Elizabeth  1939
#&gt;  5  1880 F     Minnie     1746
#&gt;  6  1880 F     Margaret   1578
#&gt;  7  1880 F     Ida        1472
#&gt;  8  1880 F     Alice      1414
#&gt;  9  1880 F     Bertha     1320
#&gt; 10  1880 F     Sarah      1288
#&gt; # ... with 1,924,655 more rows
babynames %&gt;% select(year:n)
#&gt; # A tibble: 1,924,665 x 4
#&gt;     year sex   name          n
#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;
#&gt;  1  1880 F     Mary       7065
#&gt;  2  1880 F     Anna       2604
#&gt;  3  1880 F     Emma       2003
#&gt;  4  1880 F     Elizabeth  1939
#&gt;  5  1880 F     Minnie     1746
#&gt;  6  1880 F     Margaret   1578
#&gt;  7  1880 F     Ida        1472
#&gt;  8  1880 F     Alice      1414
#&gt;  9  1880 F     Bertha     1320
#&gt; 10  1880 F     Sarah      1288
#&gt; # ... with 1,924,655 more rows
# starts_with(), ends_with(), contains()

babynames %&gt;% filter(name == &quot;Hadley&quot;)
#&gt; # A tibble: 163 x 5
#&gt;     year sex   name       n      prop
#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;     &lt;dbl&gt;
#&gt;  1  1906 M     Hadley     6 0.0000416
#&gt;  2  1908 M     Hadley    16 0.0000962
#&gt;  3  1909 M     Hadley    14 0.0000792
#&gt;  4  1910 M     Hadley     5 0.0000240
#&gt;  5  1911 M     Hadley     9 0.0000373
#&gt;  6  1912 M     Hadley    11 0.0000244
#&gt;  7  1913 M     Hadley    10 0.0000186
#&gt;  8  1914 M     Hadley    15 0.0000220
#&gt;  9  1915 M     Hadley    14 0.0000159
#&gt; 10  1916 M     Hadley    14 0.0000152
#&gt; # ... with 153 more rows
babynames %&gt;% filter(year == 1900, sex == &quot;F&quot;)
#&gt; # A tibble: 2,224 x 5
#&gt;     year sex   name          n   prop
#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;
#&gt;  1  1900 F     Mary      16706 0.0526
#&gt;  2  1900 F     Helen      6343 0.0200
#&gt;  3  1900 F     Anna       6114 0.0192
#&gt;  4  1900 F     Margaret   5304 0.0167
#&gt;  5  1900 F     Ruth       4765 0.0150
#&gt;  6  1900 F     Elizabeth  4096 0.0129
#&gt;  7  1900 F     Florence   3920 0.0123
#&gt;  8  1900 F     Ethel      3896 0.0123
#&gt;  9  1900 F     Marie      3856 0.0121
#&gt; 10  1900 F     Lillian    3414 0.0107
#&gt; # ... with 2,214 more rows
babynames %&gt;% filter(year == 2013, sex == &quot;F&quot;)
#&gt; # A tibble: 19,231 x 5
#&gt;     year sex   name          n    prop
#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;
#&gt;  1  2013 F     Sophia    21213 0.0110 
#&gt;  2  2013 F     Emma      20936 0.0109 
#&gt;  3  2013 F     Olivia    18414 0.00957
#&gt;  4  2013 F     Isabella  17631 0.00916
#&gt;  5  2013 F     Ava       15249 0.00793
#&gt;  6  2013 F     Mia       13147 0.00683
#&gt;  7  2013 F     Emily     13124 0.00682
#&gt;  8  2013 F     Abigail   12405 0.00645
#&gt;  9  2013 F     Madison   10591 0.00551
#&gt; 10  2013 F     Elizabeth  9448 0.00491
#&gt; # ... with 19,221 more rows
</code></pre>
<p>函數<code>mutate()</code></p>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">babynames %&gt;%
  mutate(
    first = tolower(substr(name, 1, 1)),
    last = substr(name, nchar(name), nchar(name))
  )
#&gt; # A tibble: 1,924,665 x 7
#&gt;     year sex   name          n   prop first last 
#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
#&gt;  1  1880 F     Mary       7065 0.0724 m     y    
#&gt;  2  1880 F     Anna       2604 0.0267 a     a    
#&gt;  3  1880 F     Emma       2003 0.0205 e     a    
#&gt;  4  1880 F     Elizabeth  1939 0.0199 e     h    
#&gt;  5  1880 F     Minnie     1746 0.0179 m     e    
#&gt;  6  1880 F     Margaret   1578 0.0162 m     t    
#&gt;  7  1880 F     Ida        1472 0.0151 i     a    
#&gt;  8  1880 F     Alice      1414 0.0145 a     e    
#&gt;  9  1880 F     Bertha     1320 0.0135 b     a    
#&gt; 10  1880 F     Sarah      1288 0.0132 s     h    
#&gt; # ... with 1,924,655 more rows

babynames %&gt;%
  arrange(desc(prop))
#&gt; # A tibble: 1,924,665 x 5
#&gt;     year sex   name        n   prop
#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt;
#&gt;  1  1880 M     John     9655 0.0815
#&gt;  2  1881 M     John     8769 0.0810
#&gt;  3  1880 M     William  9532 0.0805
#&gt;  4  1883 M     John     8894 0.0791
#&gt;  5  1881 M     William  8524 0.0787
#&gt;  6  1882 M     John     9557 0.0783
#&gt;  7  1884 M     John     9388 0.0765
#&gt;  8  1882 M     William  9298 0.0762
#&gt;  9  1886 M     John     9026 0.0758
#&gt; 10  1885 M     John     8756 0.0755
#&gt; # ... with 1,924,655 more rows

babynames %&gt;%
  summarise(n = sum(n)) #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏對n欄位加總">🏷</span><!--/html_preserve-->
#&gt; # A tibble: 1 x 1
#&gt;           n
#&gt;       &lt;int&gt;
#&gt; 1 348120517
</code></pre>
<h3 id="分組">分組</h3>
<ul>
<li>函數<code>group_by()</code> 用來分組，不會影響到原來的資料,只是添加資訊</li>
<li>取消分組的函數為<code>ungroup()</code></li>
</ul>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">head(mtcars)
</code></pre>

  
















<!--html_preserve--><div   class="table-responsive kable">
<table  class="ms-5 w-75">
<thead  class="">
<tr >
<th  style="text-align:left"></th>
<th  style="text-align:right">mpg</th>
<th  style="text-align:right">cyl</th>
<th  style="text-align:right">disp</th>
<th  style="text-align:right">hp</th>
<th  style="text-align:right">drat</th>
<th  style="text-align:right">wt</th>
<th  style="text-align:right">qsec</th>
<th  style="text-align:right">vs</th>
<th  style="text-align:right">am</th>
<th  style="text-align:right">gear</th>
<th  style="text-align:right">carb</th>
</tr>
</thead>
<tbody >
<tr >
<td  style="text-align:left">Mazda RX4</td>
<td  style="text-align:right">21.0</td>
<td  style="text-align:right">6</td>
<td  style="text-align:right">160</td>
<td  style="text-align:right">110</td>
<td  style="text-align:right">3.90</td>
<td  style="text-align:right">2.620</td>
<td  style="text-align:right">16.46</td>
<td  style="text-align:right">0</td>
<td  style="text-align:right">1</td>
<td  style="text-align:right">4</td>
<td  style="text-align:right">4</td>
</tr>
<tr >
<td  style="text-align:left">Mazda RX4 Wag</td>
<td  style="text-align:right">21.0</td>
<td  style="text-align:right">6</td>
<td  style="text-align:right">160</td>
<td  style="text-align:right">110</td>
<td  style="text-align:right">3.90</td>
<td  style="text-align:right">2.875</td>
<td  style="text-align:right">17.02</td>
<td  style="text-align:right">0</td>
<td  style="text-align:right">1</td>
<td  style="text-align:right">4</td>
<td  style="text-align:right">4</td>
</tr>
<tr >
<td  style="text-align:left">Datsun 710</td>
<td  style="text-align:right">22.8</td>
<td  style="text-align:right">4</td>
<td  style="text-align:right">108</td>
<td  style="text-align:right">93</td>
<td  style="text-align:right">3.85</td>
<td  style="text-align:right">2.320</td>
<td  style="text-align:right">18.61</td>
<td  style="text-align:right">1</td>
<td  style="text-align:right">1</td>
<td  style="text-align:right">4</td>
<td  style="text-align:right">1</td>
</tr>
<tr >
<td  style="text-align:left">Hornet 4 Drive</td>
<td  style="text-align:right">21.4</td>
<td  style="text-align:right">6</td>
<td  style="text-align:right">258</td>
<td  style="text-align:right">110</td>
<td  style="text-align:right">3.08</td>
<td  style="text-align:right">3.215</td>
<td  style="text-align:right">19.44</td>
<td  style="text-align:right">1</td>
<td  style="text-align:right">0</td>
<td  style="text-align:right">3</td>
<td  style="text-align:right">1</td>
</tr>
<tr >
<td  style="text-align:left">Hornet Sportabout</td>
<td  style="text-align:right">18.7</td>
<td  style="text-align:right">8</td>
<td  style="text-align:right">360</td>
<td  style="text-align:right">175</td>
<td  style="text-align:right">3.15</td>
<td  style="text-align:right">3.440</td>
<td  style="text-align:right">17.02</td>
<td  style="text-align:right">0</td>
<td  style="text-align:right">0</td>
<td  style="text-align:right">3</td>
<td  style="text-align:right">2</td>
</tr>
<tr >
<td  style="text-align:left">Valiant</td>
<td  style="text-align:right">18.1</td>
<td  style="text-align:right">6</td>
<td  style="text-align:right">225</td>
<td  style="text-align:right">105</td>
<td  style="text-align:right">2.76</td>
<td  style="text-align:right">3.460</td>
<td  style="text-align:right">20.22</td>
<td  style="text-align:right">1</td>
<td  style="text-align:right">0</td>
<td  style="text-align:right">3</td>
<td  style="text-align:right">1</td>
</tr>
</tbody>
</table>

</div><!--/html_preserve-->
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">str(mtcars)
#&gt; 'data.frame':	32 obs. of  11 variables:
#&gt;  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
#&gt;  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
#&gt;  $ disp: num  160 160 108 258 360 ...
#&gt;  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
#&gt;  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
#&gt;  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
#&gt;  $ qsec: num  16.5 17 18.6 19.4 17 ...
#&gt;  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
#&gt;  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
#&gt;  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
#&gt;  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...
by_cyl &lt;- mtcars %&gt;% group_by(cyl)
head(by_cyl) #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏可以看到只是添加資訊,原來的資料欄位沒變">🏷</span><!--/html_preserve-->
#&gt; # A tibble: 6 x 11
#&gt; # Groups:   cyl [3]
#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1  21       6   160   110  3.9   2.62  16.5     0     1     4     4
#&gt; 2  21       6   160   110  3.9   2.88  17.0     0     1     4     4
#&gt; 3  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1
#&gt; 4  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1
#&gt; 5  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2
#&gt; 6  18.1     6   225   105  2.76  3.46  20.2     1     0     3     1
str(by_cyl)
#&gt; grouped_df [32 x 11] (S3: grouped_df/tbl_df/tbl/data.frame)
#&gt;  $ mpg : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
#&gt;  $ cyl : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...
#&gt;  $ disp: num [1:32] 160 160 108 258 360 ...
#&gt;  $ hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...
#&gt;  $ drat: num [1:32] 3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
#&gt;  $ wt  : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...
#&gt;  $ qsec: num [1:32] 16.5 17 18.6 19.4 17 ...
#&gt;  $ vs  : num [1:32] 0 0 1 1 0 1 0 1 1 1 ...
#&gt;  $ am  : num [1:32] 1 1 1 0 0 0 0 0 0 0 ...
#&gt;  $ gear: num [1:32] 4 4 4 3 3 3 3 4 4 4 ...
#&gt;  $ carb: num [1:32] 4 4 1 1 2 1 4 2 2 4 ...
#&gt;  - attr(*, &quot;groups&quot;)= tibble [3 x 2] (S3: tbl_df/tbl/data.frame)
#&gt;   ..$ cyl  : num [1:3] 4 6 8
#&gt;   ..$ .rows: list&lt;int&gt; [1:3] 
#&gt;   .. ..$ : int [1:11] 3 8 9 18 19 20 21 26 27 28 ...
#&gt;   .. ..$ : int [1:7] 1 2 4 6 10 11 30
#&gt;   .. ..$ : int [1:14] 5 7 12 13 14 15 16 17 22 23 ...
#&gt;   .. ..@ ptype: int(0) 
#&gt;   ..- attr(*, &quot;.drop&quot;)= logi TRUE
</code></pre>
<p>但是分組結果會影響其他dplyr指令的計算結果:</p>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">by_cyl %&gt;% summarise( disp = mean(disp),  hp = mean(hp) )
#&gt; # A tibble: 3 x 3
#&gt;     cyl  disp    hp
#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1     4  105.  82.6
#&gt; 2     6  183. 122. 
#&gt; 3     8  353. 209.
by_cyl %&gt;% filter(disp == max(disp))
#&gt; # A tibble: 3 x 11
#&gt; # Groups:   cyl [3]
#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
#&gt; 2  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
#&gt; 3  10.4     8  472    205  2.93  5.25  18.0     0     0     3     4
</code></pre>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">dplyr::group_by(iris, Species)
#&gt; # A tibble: 150 x 5
#&gt; # Groups:   Species [3]
#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
#&gt;           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
#&gt;  1          5.1         3.5          1.4         0.2 setosa 
#&gt;  2          4.9         3            1.4         0.2 setosa 
#&gt;  3          4.7         3.2          1.3         0.2 setosa 
#&gt;  4          4.6         3.1          1.5         0.2 setosa 
#&gt;  5          5           3.6          1.4         0.2 setosa 
#&gt;  6          5.4         3.9          1.7         0.4 setosa 
#&gt;  7          4.6         3.4          1.4         0.3 setosa 
#&gt;  8          5           3.4          1.5         0.2 setosa 
#&gt;  9          4.4         2.9          1.4         0.2 setosa 
#&gt; 10          4.9         3.1          1.5         0.1 setosa 
#&gt; # ... with 140 more rows
#Group data into rows with the same value of Species.
#dplyr::ungroup(iris) #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏僅僅移除分組資訊">🏷</span><!--/html_preserve-->

iris %&gt;% group_by(Species) %&gt;% summarise(mean=mean(Sepal.Length))
#&gt; # A tibble: 3 x 2
#&gt;   Species     mean
#&gt;   &lt;fct&gt;      &lt;dbl&gt;
#&gt; 1 setosa      5.01
#&gt; 2 versicolor  5.94
#&gt; 3 virginica   6.59
</code></pre>
<h3 id="報告">報告</h3>
<p>函數<code>summarise()</code></p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="10_00_dplyrBasic01.files/summarise1.png" alt=""></td>
<td style="text-align:center"><img src="10_00_dplyrBasic01.files/summarise2.png" alt=""></td>
</tr>
</tbody>
</table>
<p>summarize() 可以用的函數型態是輸入向量,輸出一個值得函數。例如</p>
<ul>
<li>mean(): the mean AKA the average</li>
<li>sd(): the standard deviation, which is a measure of spread</li>
<li>min() and max(): the minimum and maximum values respectively</li>
<li>IQR(): Interquartile range</li>
<li>sum(): the sum</li>
<li>n(): 每組觀察數目。可以用來配套<code>group_by()</code>。</li>
</ul>
<h2 id="實驗-pipeline-vs-no-pipeline">實驗 pipeline vs no pipeline</h2>
<ul>
<li>x %&gt;% f(y) &lt;===&gt;  f(x, y) <!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏S3 object">🏷</span><!--/html_preserve--></li>
<li>y %&gt;% f(x, ., z) &lt;===&gt; f(x, y, z ) #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏取代逗點">🏷</span><!--/html_preserve--></li>
</ul>
<ol>
<li>
<p>產生資料</p>
<pre><code class="language-r?lang=r?class=.source?preclass=">year=c(1990,	1991,	1990,	1991,	1990,	1991,	1990,	1991,	1990,	1991) 
sex=c(&quot;f&quot;,	&quot;f&quot;,	&quot;f&quot;,	&quot;f&quot;,	&quot;f&quot;,	&quot;m&quot;,	&quot;m&quot;,	&quot;m&quot;,	&quot;m&quot;,	&quot;m&quot;)
#value=c(1,	2,	3,	4,	5,	1,	2,	3,	4,	5)
value=c(1,	2,	3,	4,	5,	6,	7,	8,	9,	10)
odf&lt;-data.frame(sex,year,value)
head(odf)
</code></pre>

  
















<!--html_preserve--><div   class="table-responsive kable">
<table  class="">
<thead  class="">
<tr >
<th  style="text-align:right">sex</th>
<th  style="text-align:right">year</th>
<th  style="text-align:right">value</th>
</tr>
</thead>
<tbody >
<tr >
<td  style="text-align:right">f</td>
<td  style="text-align:right">1990</td>
<td  style="text-align:right">1</td>
</tr>
<tr >
<td  style="text-align:right">f</td>
<td  style="text-align:right">1991</td>
<td  style="text-align:right">2</td>
</tr>
<tr >
<td  style="text-align:right">f</td>
<td  style="text-align:right">1990</td>
<td  style="text-align:right">3</td>
</tr>
<tr >
<td  style="text-align:right">f</td>
<td  style="text-align:right">1991</td>
<td  style="text-align:right">4</td>
</tr>
<tr >
<td  style="text-align:right">f</td>
<td  style="text-align:right">1990</td>
<td  style="text-align:right">5</td>
</tr>
<tr >
<td  style="text-align:right">m</td>
<td  style="text-align:right">1991</td>
<td  style="text-align:right">6</td>
</tr>
</tbody>
</table>

</div><!--/html_preserve-->
</li>
<li>
<p>不用 pipeline</p>
<pre><code class="language-r?lang=r?class=.source?preclass=">df&lt;-group_by(odf,sex)
ndf&lt;-mutate(df,rank=min_rank(value)) # <!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏增加新欄位">🏷</span><!--/html_preserve-->
arrange(ndf,sex) #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏根據sex由低到高排序">🏷</span><!--/html_preserve-->
#&gt; # A tibble: 10 x 4
#&gt; # Groups:   sex [2]
#&gt;    sex    year value  rank
#&gt;    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
#&gt;  1 f      1990     1     1
#&gt;  2 f      1991     2     2
#&gt;  3 f      1990     3     3
#&gt;  4 f      1991     4     4
#&gt;  5 f      1990     5     5
#&gt;  6 m      1991     6     1
#&gt;  7 m      1990     7     2
#&gt;  8 m      1991     8     3
#&gt;  9 m      1990     9     4
#&gt; 10 m      1991    10     5
</code></pre>
</li>
<li>
<p>使用 pipeline</p>
<pre><code class="language-r?lang=r?class=.source?preclass=">ndf&lt;-odf %&gt;%
  group_by(sex) %&gt;%
  mutate(rank = min_rank(value)) 

arrange(ndf,sex)
#&gt; # A tibble: 10 x 4
#&gt; # Groups:   sex [2]
#&gt;    sex    year value  rank
#&gt;    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
#&gt;  1 f      1990     1     1
#&gt;  2 f      1991     2     2
#&gt;  3 f      1990     3     3
#&gt;  4 f      1991     4     4
#&gt;  5 f      1990     5     5
#&gt;  6 m      1991     6     1
#&gt;  7 m      1990     7     2
#&gt;  8 m      1991     8     3
#&gt;  9 m      1990     9     4
#&gt; 10 m      1991    10     5
</code></pre>
</li>
</ol>
<p>看看其他範例</p>
<pre><code class="language-r?lang=r?class=.source?preclass=ms-5.w-75">df %&gt;% group_by(sex) %&gt;%str() #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏分組以後放到非dyplr套件的函數&lt;code&gt;str()&lt;/code&gt;要看結構,結果並沒有產生兩個分組結構，也就是說&lt;code&gt;str()&lt;/code&gt;不認識分組結構">🏷</span><!--/html_preserve-->
#&gt; grouped_df [10 x 3] (S3: grouped_df/tbl_df/tbl/data.frame)
#&gt;  $ sex  : chr [1:10] &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...
#&gt;  $ year : num [1:10] 1990 1991 1990 1991 1990 ...
#&gt;  $ value: num [1:10] 1 2 3 4 5 6 7 8 9 10
#&gt;  - attr(*, &quot;groups&quot;)= tibble [2 x 2] (S3: tbl_df/tbl/data.frame)
#&gt;   ..$ sex  : chr [1:2] &quot;f&quot; &quot;m&quot;
#&gt;   ..$ .rows: list&lt;int&gt; [1:2] 
#&gt;   .. ..$ : int [1:5] 1 2 3 4 5
#&gt;   .. ..$ : int [1:5] 6 7 8 9 10
#&gt;   .. ..@ ptype: int(0) 
#&gt;   ..- attr(*, &quot;.drop&quot;)= logi TRUE

babynames %&gt;%
  group_by(name) %&gt;%
  summarise(n = sum(n)) #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏n 是欄位名稱">🏷</span><!--/html_preserve-->
#&gt; # A tibble: 97,310 x 2
#&gt;    name          n
#&gt;    &lt;chr&gt;     &lt;int&gt;
#&gt;  1 Aaban       107
#&gt;  2 Aabha        35
#&gt;  3 Aabid        10
#&gt;  4 Aabir         5
#&gt;  5 Aabriella    32
#&gt;  6 Aada          5
#&gt;  7 Aadam       254
#&gt;  8 Aadan       130
#&gt;  9 Aadarsh     199
#&gt; 10 Aaden      4658
#&gt; # ... with 97,300 more rows
  
babynames %&gt;%
  filter(name %in% c(&quot;John&quot;, &quot;Mary&quot;, &quot;William&quot;)) %&gt;%
  group_by(name, sex) %&gt;%
  summarise(n = sum(n))
#&gt; # A tibble: 6 x 3
#&gt; # Groups:   name [3]
#&gt;   name    sex         n
#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;
#&gt; 1 John    F       21676
#&gt; 2 John    M     5115466
#&gt; 3 Mary    F     4123200
#&gt; 4 Mary    M       15160
#&gt; 5 William F       15949
#&gt; 6 William M     4102604

babynames %&gt;%
  group_by(year, sex) %&gt;%
  mutate(rank = min_rank(desc(n))) %&gt;%
  tail() #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏只看後幾筆">🏷</span><!--/html_preserve-->
#&gt; # A tibble: 6 x 6
#&gt; # Groups:   year, sex [1]
#&gt;    year sex   name       n       prop  rank
#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;      &lt;dbl&gt; &lt;int&gt;
#&gt; 1  2017 M     Zyhier     5 0.00000255 12171
#&gt; 2  2017 M     Zykai      5 0.00000255 12171
#&gt; 3  2017 M     Zykeem     5 0.00000255 12171
#&gt; 4  2017 M     Zylin      5 0.00000255 12171
#&gt; 5  2017 M     Zylis      5 0.00000255 12171
#&gt; 6  2017 M     Zyrie      5 0.00000255 12171
</code></pre>
<h2 id="練習">練習</h2>
<hr>
<ol>
<li>
<p>名叫Hadley 的男女各多少人?</p>
<pre><code class="language-r?lang=r?class=.source?preclass=">babynames %&gt;%
  filter(name == &quot;Hadley&quot;) %&gt;%
  group_by(sex) %&gt;%
  summarise(n = sum(n))
#&gt; # A tibble: 2 x 2
#&gt;   sex       n
#&gt;   &lt;chr&gt; &lt;int&gt;
#&gt; 1 F     26708
#&gt; 2 M      1883
</code></pre>
</li>
<li>
<p>The travesty延續上題，各年的的男女Hadley數目?</p>
<pre><code class="language-r?lang=r?class=.source?preclass=">library(ggplot2)
babynames %&gt;%
  filter(name == &quot;Hadley&quot;) %&gt;%
  ggplot(aes(year, n)) + 
    geom_line(aes(colour = sex)) #<!--html_preserve--><span  data-bs-toggle="tooltip" data-bs-html="true"
title="👏過濾出來,然後按照年度(x),出生數(y)作圖">🏷</span><!--/html_preserve-->
</code></pre>
<!--html_preserve--><figure  class="figure nopre text-center d-block w-50 m-auto   "><img src="10_00_dplyrBasic01_files/figure-html/unnamed-chunk-18-1.png" class="figure-img w-100 "/> <figcaption class="figure-caption">
figure</figcaption></figure><!--/html_preserve-->
</li>
</ol>
  </article><div class="collapse fs-6 pt-2" id="qnote-list">
    <div class="d-flex flex-column align-items-stretch flex-shrink-0 bg-white ">
        <span >
            
            <span class="fw-semibold">
                <button  class="btn btn-primary btn-inline" 
                   data-bs-toggle="collapse" data-bs-target="#qnote-edit"><span data-bs-toggle="tooltip" title="加入速記">加</span></button>
                <button id="qnote-gsave" class="btn btn-primary btn-inline" 
                   data-bs-toggle="tooltip" data-bs-placement="left" title="存到硬碟"
                   onclick="qnSaveGoogle()">存</button>
                <label for="qnote-load" class="btn btn-primary btn-inline"  data-bs-toggle="tooltip" data-bs-placement="left" title="從檔案載入">載</label>   
                <input style="display:none" type="file" id="qnote-load" onchange="qnLoadGoogle(this)" />
                <button id="qnote-clear" class="btn btn-primary btn-inline" 
                   data-bs-toggle="tooltip" data-bs-placement="left" title="清除全部速記"
                   onclick="cleanNotes()">清</button>
            </span>
        </span>
        <span class="fw-semibold collapse" id="qnote-edit"> 
            <input type="text" class="txtitle d-block w-100 h-25 " placeholder="抬頭" />
            <textarea class="txtBox  d-block w-100 h-75 " placeholder="本文"></textarea>
            
            <button id="qnote-add-item" onclick="addNote()" class="btn btn-primary">存</button> 
        </span>

    </div>
</div>

<link href="../css/quicknote.css?1636607466" rel="stylesheet">
<script src="../js/quicknote.js?1636607466"></script>
<div id="page-guide" class="bg-dark">  
  
    
          
          <a href="../rlang/1_5_%E7%B7%A8%E7%A2%BC.html" 
                   class="btn btn-primary" 
                   data-bs-toggle="tooltip" 
                   data-bs-placement="left" title=1.5&#32;編碼>前</a>
                   
          
            <a href="../rlang/11_environments.html" 
               class="btn btn-primary" data-bs-toggle="tooltip" data-bs-placement="left" 
               title=11&#32;Environments>後</a>            
          
          

  
<script src="../js/packhtml.js?1636607466"></script>    
<button class="btn btn-primary " onclick="packthis(this)"
data-bs-toggle="tooltip" data-bs-placement="left" title="打包成單一檔案">包</button>
<button class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="div#qnote-list">
  <span data-bs-toggle="tooltip" data-bs-placement="left" title="快速註記">速</span></button>
 
</div>
  </div>


  <script src="../js/featherlight.min.js?1636607466"></script>
  <script src="../js/featherlight.gallery.min.js?1636607466"></script>
  <link href="../css/featherlight.min.css?1636607466" rel="stylesheet">
  <link href="../css/featherlight.gallery.min.css?1636607466" rel="stylesheet">
  
  <script src="../js/highlight.min.js"></script>
  
  <script src="../js/hugohelper.js?1636607466"></script>
  <link href="../css/rmd.css?1636607466" rel="stylesheet">
  <link href="../css/mystyle.css?1636607466" rel="stylesheet">    
  <script src='../js/variant.js?1636607466'></script>

<script>
  
    let idxfile = "\/blogR\/index.json"  
  
</script>
<script src='../js/localsearch.js?1636607466'></script>
  
      
          <script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
      
      <script>
          mermaid.initialize({ startOnLoad: true });
      </script>
  

  <script>
      MathJax = {
        tex: {
          inlineMath: [['\($', '$\)'], ['\\(', '\\)']],
          displayMath: [['$$','$$']  , ['\\[','\\]']] 
        },
        svg: {
          fontCache: 'global'
        }
      };
      
      
    
      </script>
      <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
        src="https://example.com/mathjax/MathJax.js?config=TeX-AMS_CHTML">
      </script>



<script>
  document.addEventListener('DOMContentLoaded', (event) => {
    jumpto = document.querySelector("#sidebar .active");
     if (jumpto!=null) jumpto.scrollIntoViewIfNeeded(true);
  
  });    
  
  </script>
</body>
</html>