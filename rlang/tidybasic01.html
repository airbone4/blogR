<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.76.5" />
    <meta name="description" content="基本語法">


    <link rel="shortcut icon" href="../images/favicon.png" type="image/x-icon" />
<link rel="icon" href="../images/favicon.png" type="image/x-icon" />

    <title>TidyBasic01 - R in Class</title>

    
    <link href="../css/nucleus.css?1606367336" rel="stylesheet">
    <link href="../css/fontawesome-all.min.css?1606367336" rel="stylesheet">
    <link href="../css/hybrid.css?1606367336" rel="stylesheet">
    <link href="../css/featherlight.min.css?1606367336" rel="stylesheet">
    <link href="../css/perfect-scrollbar.min.css?1606367336" rel="stylesheet">
    <link href="../css/auto-complete.css?1606367336" rel="stylesheet">
    <link href="../css/atom-one-dark-reasonable.css?1606367336" rel="stylesheet">
    <link href="../css/theme.css?1606367336" rel="stylesheet">
    <link href="../css/hugo-theme.css?1606367336" rel="stylesheet">
    
    <link href="../extra_theme/css/mystyle.css?1606367336" rel="stylesheet"><link href="../extra_theme/css/demoContainer.css?1606367336" rel="stylesheet"><link href="../extra_theme/css/rmd.css?1606367336" rel="stylesheet">

    <script src="../js/jquery-3.3.1.min.js?1606367336"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="../rlang/tidybasic01.html">

    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://airbon5.github.io/xx/">
  <img src=../extra_theme/images/rmi.png>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../js/lunr.min.js?1606367336"></script>
<script type="text/javascript" src="../js/auto-complete.js?1606367336"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="../js/search.js?1606367336"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='../'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/rlang.html" title="R language" class="dd-item
        parent
        
        
        ">
      <a href="../rlang.html">
          R language
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/rlang/requirement.html" title="Requirement" class="dd-item ">
        <a href="../rlang/requirement.html">
        Requirement
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/data_explorer_1.html" title="data explorer 1" class="dd-item ">
        <a href="../rlang/data_explorer_1.html">
        data explorer 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/data_explorer_2.html" title="data explorer 2" class="dd-item ">
        <a href="../rlang/data_explorer_2.html">
        data explorer 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/quickview1.html" title="Quick view 1" class="dd-item ">
        <a href="../rlang/quickview1.html">
        Quick view 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/regular_expression.html" title="Regular expression syntax" class="dd-item ">
        <a href="../rlang/regular_expression.html">
        Regular expression syntax
        
        </a>
    </li>
     
  
 

            
          
            
            
          
            
            




 
  
    
      <li data-nav-id="/rlang/type_basic.html" title="type basic" class="dd-item ">
        <a href="../rlang/type_basic.html">
        type basic
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/type_list.html" title="type list" class="dd-item ">
        <a href="../rlang/type_list.html">
        type list
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/type_matrix.html" title="type matrix" class="dd-item ">
        <a href="../rlang/type_matrix.html">
        type matrix
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/type_more.html" title="type more" class="dd-item ">
        <a href="../rlang/type_more.html">
        type more
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/type_post.html" title="type post" class="dd-item ">
        <a href="../rlang/type_post.html">
        type post
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/type_string_function.html" title="type string" class="dd-item ">
        <a href="../rlang/type_string_function.html">
        type string
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/type_vector.html" title="type vector" class="dd-item ">
        <a href="../rlang/type_vector.html">
        type vector
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/filesystem.html" title="File System" class="dd-item ">
        <a href="../rlang/filesystem.html">
        File System
        
        </a>
    </li>
     
  
 

            
          
            
            
          
            
            




 
  
    
      <li data-nav-id="/rlang/programming_1.html" title="Programming 1" class="dd-item ">
        <a href="../rlang/programming_1.html">
        Programming 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/apply_family.html" title="function - apply family" class="dd-item ">
        <a href="../rlang/apply_family.html">
        function - apply family
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/function_1.html" title="Function basic" class="dd-item ">
        <a href="../rlang/function_1.html">
        Function basic
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/function_2.html" title="Function more" class="dd-item ">
        <a href="../rlang/function_2.html">
        Function more
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/rpackages.html" title="R Package" class="dd-item ">
        <a href="../rlang/rpackages.html">
        R Package
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/plot01.html" title="Plot 01" class="dd-item ">
        <a href="../rlang/plot01.html">
        Plot 01
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/plot02.html" title="Plot more" class="dd-item ">
        <a href="../rlang/plot02.html">
        Plot more
        
        </a>
    </li>
     
  
 

            
          
            
            
          
            
            




 
  
    
      <li data-nav-id="/rlang/environments.html" title="Environment" class="dd-item ">
        <a href="../rlang/environments.html">
        Environment
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/sampling.html" title="sampling" class="dd-item ">
        <a href="../rlang/sampling.html">
        sampling
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/eco_01_intro.html" title="Econometrics" class="dd-item ">
        <a href="../rlang/eco_01_intro.html">
        Econometrics
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/sim_1.html" title="simulation 1" class="dd-item ">
        <a href="../rlang/sim_1.html">
        simulation 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/hw/hw_basic.html" title="assignment-1" class="dd-item ">
        <a href="../rlang/hw/hw_basic.html">
        assignment-1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rlang/hw/hw_regexp.html" title="regexpr" class="dd-item ">
        <a href="../rlang/hw/hw_regexp.html">
        regexpr
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/topic.html" title="Topics" class="dd-item
        
        
        
        ">
      <a href="../topic.html">
          Topics
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/topic/rmd/rmd_basic.html" title="Rmd basic" class="dd-item ">
        <a href="../topic/rmd/rmd_basic.html">
        Rmd basic
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/topic/rmd/rmd_hook.html" title="Rmd hook" class="dd-item ">
        <a href="../topic/rmd/rmd_hook.html">
        Rmd hook
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/topic/rmd/rmd_pdf.html" title="Rmd pdf" class="dd-item ">
        <a href="../topic/rmd/rmd_pdf.html">
        Rmd pdf
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/topic/rmd/rmd_topic_1.html" title="rmd topic 1" class="dd-item ">
        <a href="../topic/rmd/rmd_topic_1.html">
        rmd topic 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/topic/rmd/git-book-note.html" title="git book note" class="dd-item ">
        <a href="../topic/rmd/git-book-note.html">
        git book note
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/topic/interesting.html" title="interesting" class="dd-item ">
        <a href="../topic/interesting.html">
        interesting
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/topic/experiment.html" title="實驗" class="dd-item
        
        
        
        ">
      <a href="../topic/experiment.html">
          實驗
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/topic/experiment/central.html" title="中央" class="dd-item ">
        <a href="../topic/experiment/central.html">
        中央
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/topic/test.html" title="網頁測試" class="dd-item
        
        
        
        ">
      <a href="../topic/test.html">
          網頁測試
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/topic/test/emo_test.html" title="emoji_test" class="dd-item ">
        <a href="../topic/test/emo_test.html">
        emoji_test
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/topic/test/testpage.html" title="testpage" class="dd-item ">
        <a href="../topic/test/testpage.html">
        testpage
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../'>class log</a> > <a href='../rlang.html'>R language</a> > TidyBasic01
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#title-tidy-basic-01">title: Tidy basic 01</a></li>
</ul></li>
<li><a href="#tidy-basic-01">Tidy Basic 01</a>
<ul>
<li><a href="#long-and-wide-data">long and wide data</a>
<ul>
<li><a href="#gather-wide-to-long">gather: wide to long</a></li>
<li><a href="#spread-long-to-wide">spread :long to wide</a></li>
</ul></li>
<li><a href="#dplyr">dplyr</a></li>
<li><a href="#other">other</a>
<ul>
<li><a href="#basic-verbs">Basic verbs</a></li>
<li><a href="#group-by">Group by</a></li>
<li><a href="#summarize">summarize()</a>
<ul>
<li><a href="#實驗-pipeline-vs-no-pipeline">實驗 pipeline vs no pipeline</a></li>
<li><a href="#不用-pipeline">不用 pipeline</a></li>
<li><a href="#使用-pipeline">使用 pipeline</a></li>
<li><a href="#combining-to-answer-more-complex-questions">Combining to answer more complex questions &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</a>
<ul>
<li><a href="#how-many-hadley-s">How many Hadley&rsquo;s?</a></li>
<li><a href="#the-travesty">The travesty</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              TidyBasic01

            </h1>
			
          

        




<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">需要安裝babynames,ggplot2</code></pre></div>
<hr />

<h2 id="title-tidy-basic-01">title: Tidy basic 01</h2>

<h1 id="tidy-basic-01">Tidy Basic 01</h1>
<pre><code class="language-r　warning=FALSE" data-lang="r　warning=FALSE">require(tidyr)
require(dplyr) # data_frame</code></pre>
<p>From <a href="http://stackoverflow.com/questions/1181060">http://stackoverflow.com/questions/1181060</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">require</span>(tidyr)
<span style="color:#75715e">#&gt; Loading required package: tidyr</span>
<span style="color:#75715e">#&gt; Warning: package &#39;tidyr&#39; was built under R version 4.0.3</span>
<span style="color:#a6e22e">require</span>(dplyr) <span style="color:#75715e"># data_frame</span>
stocks <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data_frame</span>(
  time <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#e6db74">&#39;2009-01-01&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span><span style="color:#ae81ff">9</span>,
  X <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>),
  Y <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>),
  Z <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">4</span>)
)
<span style="color:#75715e">#&gt; Warning: `data_frame()` is deprecated as of tibble 1.1.0.</span>
<span style="color:#75715e">#&gt; Please use `tibble()` instead.</span>
<span style="color:#75715e">#&gt; This warning is displayed once every 8 hours.</span>
<span style="color:#75715e">#&gt; Call `lifecycle::last_warnings()` to see where this warning was generated.</span>
dset1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">head</span>(stocks)
knitr<span style="color:#f92672">::</span><span style="color:#a6e22e">kable</span>(dset1, format <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;html&#34;</span>)</code></pre></div>
<table>
 <thead>
  <tr>
   <th style="text-align:left;"> time </th>
   <th style="text-align:right;"> X </th>
   <th style="text-align:right;"> Y </th>
   <th style="text-align:right;"> Z </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2009-01-01 </td>
   <td style="text-align:right;"> 0.4092032 </td>
   <td style="text-align:right;"> 0.5640220 </td>
   <td style="text-align:right;"> 4.9678263 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-02 </td>
   <td style="text-align:right;"> -0.3230250 </td>
   <td style="text-align:right;"> 0.5758674 </td>
   <td style="text-align:right;"> 1.7189625 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-03 </td>
   <td style="text-align:right;"> 0.6358523 </td>
   <td style="text-align:right;"> 1.6740965 </td>
   <td style="text-align:right;"> -2.5944637 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-04 </td>
   <td style="text-align:right;"> -1.8461288 </td>
   <td style="text-align:right;"> 2.0478689 </td>
   <td style="text-align:right;"> 3.6135759 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-05 </td>
   <td style="text-align:right;"> 0.9536474 </td>
   <td style="text-align:right;"> 0.0354902 </td>
   <td style="text-align:right;"> -0.0528726 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-06 </td>
   <td style="text-align:right;"> 1.1884898 </td>
   <td style="text-align:right;"> 3.4479880 </td>
   <td style="text-align:right;"> 0.9900709 </td>
  </tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">gather</span>(stocks, stock, price, <span style="color:#f92672">-</span>time)
<span style="color:#75715e">#&gt; # A tibble: 30 x 3</span>
<span style="color:#75715e">#&gt;    time       stock  price</span>
<span style="color:#75715e">#&gt;    &lt;date&gt;     &lt;chr&gt;  &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt;  1 2009-01-01 X      0.409</span>
<span style="color:#75715e">#&gt;  2 2009-01-02 X     -0.323</span>
<span style="color:#75715e">#&gt;  3 2009-01-03 X      0.636</span>
<span style="color:#75715e">#&gt;  4 2009-01-04 X     -1.85 </span>
<span style="color:#75715e">#&gt;  5 2009-01-05 X      0.954</span>
<span style="color:#75715e">#&gt;  6 2009-01-06 X      1.19 </span>
<span style="color:#75715e">#&gt;  7 2009-01-07 X      0.542</span>
<span style="color:#75715e">#&gt;  8 2009-01-08 X     -0.833</span>
<span style="color:#75715e">#&gt;  9 2009-01-09 X     -0.526</span>
<span style="color:#75715e">#&gt; 10 2009-01-10 X      1.42 </span>
<span style="color:#75715e">#&gt; # ... with 20 more rows</span>
stocks <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">gather</span>(stock, price, <span style="color:#f92672">-</span>time)
<span style="color:#75715e">#&gt; # A tibble: 30 x 3</span>
<span style="color:#75715e">#&gt;    time       stock  price</span>
<span style="color:#75715e">#&gt;    &lt;date&gt;     &lt;chr&gt;  &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt;  1 2009-01-01 X      0.409</span>
<span style="color:#75715e">#&gt;  2 2009-01-02 X     -0.323</span>
<span style="color:#75715e">#&gt;  3 2009-01-03 X      0.636</span>
<span style="color:#75715e">#&gt;  4 2009-01-04 X     -1.85 </span>
<span style="color:#75715e">#&gt;  5 2009-01-05 X      0.954</span>
<span style="color:#75715e">#&gt;  6 2009-01-06 X      1.19 </span>
<span style="color:#75715e">#&gt;  7 2009-01-07 X      0.542</span>
<span style="color:#75715e">#&gt;  8 2009-01-08 X     -0.833</span>
<span style="color:#75715e">#&gt;  9 2009-01-09 X     -0.526</span>
<span style="color:#75715e">#&gt; 10 2009-01-10 X      1.42 </span>
<span style="color:#75715e">#&gt; # ... with 20 more rows</span>
dset1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">head</span>(stocks)
knitr<span style="color:#f92672">::</span><span style="color:#a6e22e">kable</span>(dset1, format <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;html&#34;</span>)</code></pre></div>
<table>
 <thead>
  <tr>
   <th style="text-align:left;"> time </th>
   <th style="text-align:right;"> X </th>
   <th style="text-align:right;"> Y </th>
   <th style="text-align:right;"> Z </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2009-01-01 </td>
   <td style="text-align:right;"> 0.4092032 </td>
   <td style="text-align:right;"> 0.5640220 </td>
   <td style="text-align:right;"> 4.9678263 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-02 </td>
   <td style="text-align:right;"> -0.3230250 </td>
   <td style="text-align:right;"> 0.5758674 </td>
   <td style="text-align:right;"> 1.7189625 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-03 </td>
   <td style="text-align:right;"> 0.6358523 </td>
   <td style="text-align:right;"> 1.6740965 </td>
   <td style="text-align:right;"> -2.5944637 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-04 </td>
   <td style="text-align:right;"> -1.8461288 </td>
   <td style="text-align:right;"> 2.0478689 </td>
   <td style="text-align:right;"> 3.6135759 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-05 </td>
   <td style="text-align:right;"> 0.9536474 </td>
   <td style="text-align:right;"> 0.0354902 </td>
   <td style="text-align:right;"> -0.0528726 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-06 </td>
   <td style="text-align:right;"> 1.1884898 </td>
   <td style="text-align:right;"> 3.4479880 </td>
   <td style="text-align:right;"> 0.9900709 </td>
  </tr>
</tbody>
</table>

<p>設定css</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">writeLines</span>(<span style="color:#e6db74">&#34;td, th { padding : 6px } th { background-color : brown ; color : white; border : 1px solid white; } td { color : brown ; border : 1px solid brown }&#34;</span>, con <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tableStyle.css&#34;</span>)</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">stocks <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data_frame</span>(
  time <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#e6db74">&#39;2009-01-01&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span><span style="color:#ae81ff">9</span>,
  X <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>),
  Y <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>),
  Z <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">4</span>)
)
dset1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">head</span>(stocks)
knitr<span style="color:#f92672">::</span><span style="color:#a6e22e">kable</span>(dset1, format <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;html&#34;</span>)</code></pre></div>
<table>
 <thead>
  <tr>
   <th style="text-align:left;"> time </th>
   <th style="text-align:right;"> X </th>
   <th style="text-align:right;"> Y </th>
   <th style="text-align:right;"> Z </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 2009-01-01 </td>
   <td style="text-align:right;"> -1.1075869 </td>
   <td style="text-align:right;"> 0.0989527 </td>
   <td style="text-align:right;"> 4.973421 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-02 </td>
   <td style="text-align:right;"> -1.4704242 </td>
   <td style="text-align:right;"> 1.6019733 </td>
   <td style="text-align:right;"> -2.520083 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-03 </td>
   <td style="text-align:right;"> 0.6058373 </td>
   <td style="text-align:right;"> -0.2192235 </td>
   <td style="text-align:right;"> -3.897031 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-04 </td>
   <td style="text-align:right;"> 0.9562989 </td>
   <td style="text-align:right;"> -2.6783843 </td>
   <td style="text-align:right;"> -4.707229 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-05 </td>
   <td style="text-align:right;"> 0.2976660 </td>
   <td style="text-align:right;"> 2.4826817 </td>
   <td style="text-align:right;"> -1.521111 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2009-01-06 </td>
   <td style="text-align:right;"> -0.8540284 </td>
   <td style="text-align:right;"> 2.3688327 </td>
   <td style="text-align:right;"> -6.263215 </td>
  </tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">demo<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">gather</span>(stocks, stock, price, <span style="color:#f92672">-</span>time)

dset1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">head</span>(demo)
knitr<span style="color:#f92672">::</span><span style="color:#a6e22e">kable</span>(dset1, format <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;html&#34;</span>)</code></pre></div>
<p><table><br />
 <thead><br />
  <tr><br />
   <th style="text-align:left;"> time </th><br />
   <th style="text-align:left;"> stock </th><br />
   <th style="text-align:right;"> price </th><br />
  </tr><br />
 </thead><br />
<tbody><br />
  <tr><br />
   <td style="text-align:left;"> 2009-01-01 </td><br />
   <td style="text-align:left;"> X </td><br />
   <td style="text-align:right;"> -1.1075869 </td><br />
  </tr><br />
  <tr><br />
   <td style="text-align:left;"> 2009-01-02 </td><br />
   <td style="text-align:left;"> X </td><br />
   <td style="text-align:right;"> -1.4704242 </td><br />
  </tr><br />
  <tr><br />
   <td style="text-align:left;"> 2009-01-03 </td><br />
   <td style="text-align:left;"> X </td><br />
   <td style="text-align:right;"> 0.6058373 </td><br />
  </tr><br />
  <tr><br />
   <td style="text-align:left;"> 2009-01-04 </td><br />
   <td style="text-align:left;"> X </td><br />
   <td style="text-align:right;"> 0.9562989 </td><br />
  </tr><br />
  <tr><br />
   <td style="text-align:left;"> 2009-01-05 </td><br />
   <td style="text-align:left;"> X </td><br />
   <td style="text-align:right;"> 0.2976660 </td><br />
  </tr><br />
  <tr><br />
   <td style="text-align:left;"> 2009-01-06 </td><br />
   <td style="text-align:left;"> X </td><br />
   <td style="text-align:right;"> -0.8540284 </td><br />
  </tr><br />
</tbody><br />
</table></p>

<h2 id="long-and-wide-data">long and wide data</h2>

<h3 id="gather-wide-to-long">gather: wide to long</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">wide <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data_frame</span>(
  time <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#e6db74">&#39;2009-01-01&#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span><span style="color:#ae81ff">9</span>,
  X <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>),
  Y <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>),
  Z <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">4</span>)
)

long <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">gather</span>(wide,stock,price,<span style="color:#f92672">-</span>time)
<span style="color:#a6e22e">head</span>(long)
<span style="color:#75715e">#&gt; # A tibble: 6 x 3</span>
<span style="color:#75715e">#&gt;   time       stock  price</span>
<span style="color:#75715e">#&gt;   &lt;date&gt;     &lt;chr&gt;  &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1 2009-01-01 X     -0.737</span>
<span style="color:#75715e">#&gt; 2 2009-01-02 X      0.654</span>
<span style="color:#75715e">#&gt; 3 2009-01-03 X      1.67 </span>
<span style="color:#75715e">#&gt; 4 2009-01-04 X     -0.332</span>
<span style="color:#75715e">#&gt; 5 2009-01-05 X      1.62 </span>
<span style="color:#75715e">#&gt; 6 2009-01-06 X     -0.283</span></code></pre></div>
<h3 id="spread-long-to-wide">spread :long to wide</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">wide2 <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">spread</span>(long,stock,price)
<span style="color:#a6e22e">head</span>(wide2)
<span style="color:#75715e">#&gt; # A tibble: 6 x 4</span>
<span style="color:#75715e">#&gt;   time            X      Y      Z</span>
<span style="color:#75715e">#&gt;   &lt;date&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1 2009-01-01 -0.737 -1.02   0.780</span>
<span style="color:#75715e">#&gt; 2 2009-01-02  0.654 -2.15   2.25 </span>
<span style="color:#75715e">#&gt; 3 2009-01-03  1.67   0.600 -1.83 </span>
<span style="color:#75715e">#&gt; 4 2009-01-04 -0.332 -1.10  -5.80 </span>
<span style="color:#75715e">#&gt; 5 2009-01-05  1.62  -0.843  0.636</span>
<span style="color:#75715e">#&gt; 6 2009-01-06 -0.283 -0.540  4.69</span></code></pre></div>
<p>更多參考:<br />
<a href="http://www.cookbook-r.com/Manipulating_data/Converting_data_between_wide_and_long_format/">cookbook for R</a></p>

<h2 id="dplyr">dplyr</h2>

<p>函數名 功能</p>

<ul>
<li><p>row_number 排序,如果數值一樣,則靠前出現的元素排名在前,例如(3,3) 則 1,2</p></li>

<li><p>min_rank 排序,如果數值一樣,則都是同一等級，但是，佔用下一名次。例如</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">data<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>)  
data
<span style="color:#75715e">#&gt; [1] 3 3 4</span>
<span style="color:#a6e22e">min_rank</span>(data)
<span style="color:#75715e">#&gt; [1] 1 1 3</span></code></pre></div></li>

<li><p>dense_rank 排序,如果數值一樣,則都是同一等級，但是，<code>不</code>佔用下一名次</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">data<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>)  
data
<span style="color:#75715e">#&gt; [1] 3 3 4</span>
<span style="color:#a6e22e">dense_rank</span>(data)
<span style="color:#75715e">#&gt; [1] 1 1 2</span></code></pre></div></li>

<li><p>percent_rank 按百分比的排名<br />
percent_rank = (min_rank(x) - 1)/(sum(!is.na(x)) - 1)</p></li>

<li><p>cume_dist 累計分佈</p></li>

<li><p>ntile : floor(n * (row_number(x) - 1)/len + 1)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">data<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">runif</span>(<span style="color:#ae81ff">10</span>)<span style="color:#f92672">*</span><span style="color:#ae81ff">10</span>)
pr<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">percent_rank</span>(data)
cd<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">cume_dist</span>(data)
mr<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">min_rank</span>(data)
df<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">data.frame</span>(data,pr,mr,cd)
<span style="color:#a6e22e">arrange</span>(df,data)
<span style="color:#75715e">#&gt;    data        pr mr  cd</span>
<span style="color:#75715e">#&gt; 1     0 0.0000000  1 0.2</span>
<span style="color:#75715e">#&gt; 2     0 0.0000000  1 0.2</span>
<span style="color:#75715e">#&gt; 3     3 0.2222222  3 0.4</span>
<span style="color:#75715e">#&gt; 4     3 0.2222222  3 0.4</span>
<span style="color:#75715e">#&gt; 5     5 0.4444444  5 0.5</span>
<span style="color:#75715e">#&gt; 6     6 0.5555556  6 0.6</span>
<span style="color:#75715e">#&gt; 7     7 0.6666667  7 0.7</span>
<span style="color:#75715e">#&gt; 8     9 0.7777778  8 1.0</span>
<span style="color:#75715e">#&gt; 9     9 0.7777778  8 1.0</span>
<span style="color:#75715e">#&gt; 10    9 0.7777778  8 1.0</span></code></pre></div></li>
</ul>

<p>note:</p>

<p>(2,3,3,3,3,4,5,6,6,9)</p>

<dl>
<dt>| 0 | 1 | 4 | 1 | 1 | 2 | 0 | 0 | 1 |<br />
<br /></dt>
</dl>

<dl>
<dt>| 0 | 1 | 4 | 1 | 1 | 2 | 0 | 0 | 1 |<br />
<br /></dt>
</dl>

<dl>
<dt>0 | 1 | 4 | 1 | 1 | 2 | 0 | 0 | 1 |<br />
<br /></dt>
</dl>

<p>::: sidebar</p>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<dl>
<dt>:::<br />
<br /></dt>
</dl>

<p>::: sidebar<br />
想要由大到小,例如分數等級</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"> data
 <span style="color:#75715e">#&gt;  [1] 5 0 3 6 0 9 9 7 9 3</span>
 <span style="color:#a6e22e">row_number</span>(<span style="color:#a6e22e">desc</span>(data))
 <span style="color:#75715e">#&gt;  [1]  6  9  7  5 10  1  2  4  3  8</span></code></pre></div>
<dl>
<dt>:::<br />
<br /></dt>
</dl>

<p>::: sidebar<br />
Percentile<br />
The nth percentile of an observation variable is the value that cuts off the first n percent of the data values when it is sorted in ascending order.</p>

<p>Problem<br />
Find the 32nd, 57th and 98th percentiles of runiform(200).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">data<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">runif</span>(<span style="color:#ae81ff">200</span>) 
<span style="color:#a6e22e">quantile</span>(data, <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">.32</span>, <span style="color:#ae81ff">.57</span>, <span style="color:#ae81ff">.98</span>)) </code></pre></div>
<p>:::</p>

<h2 id="other">other</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(babynames)
babynames
<span style="color:#75715e">#&gt; # A tibble: 1,924,665 x 5</span>
<span style="color:#75715e">#&gt;     year sex   name          n   prop</span>
<span style="color:#75715e">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt;  1  1880 F     Mary       7065 0.0724</span>
<span style="color:#75715e">#&gt;  2  1880 F     Anna       2604 0.0267</span>
<span style="color:#75715e">#&gt;  3  1880 F     Emma       2003 0.0205</span>
<span style="color:#75715e">#&gt;  4  1880 F     Elizabeth  1939 0.0199</span>
<span style="color:#75715e">#&gt;  5  1880 F     Minnie     1746 0.0179</span>
<span style="color:#75715e">#&gt;  6  1880 F     Margaret   1578 0.0162</span>
<span style="color:#75715e">#&gt;  7  1880 F     Ida        1472 0.0151</span>
<span style="color:#75715e">#&gt;  8  1880 F     Alice      1414 0.0145</span>
<span style="color:#75715e">#&gt;  9  1880 F     Bertha     1320 0.0135</span>
<span style="color:#75715e">#&gt; 10  1880 F     Sarah      1288 0.0132</span>
<span style="color:#75715e">#&gt; # ... with 1,924,655 more rows</span></code></pre></div>
<h3 id="basic-verbs">Basic verbs</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">babynames <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(<span style="color:#f92672">-</span>prop)
<span style="color:#75715e">#&gt; # A tibble: 1,924,665 x 4</span>
<span style="color:#75715e">#&gt;     year sex   name          n</span>
<span style="color:#75715e">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;</span>
<span style="color:#75715e">#&gt;  1  1880 F     Mary       7065</span>
<span style="color:#75715e">#&gt;  2  1880 F     Anna       2604</span>
<span style="color:#75715e">#&gt;  3  1880 F     Emma       2003</span>
<span style="color:#75715e">#&gt;  4  1880 F     Elizabeth  1939</span>
<span style="color:#75715e">#&gt;  5  1880 F     Minnie     1746</span>
<span style="color:#75715e">#&gt;  6  1880 F     Margaret   1578</span>
<span style="color:#75715e">#&gt;  7  1880 F     Ida        1472</span>
<span style="color:#75715e">#&gt;  8  1880 F     Alice      1414</span>
<span style="color:#75715e">#&gt;  9  1880 F     Bertha     1320</span>
<span style="color:#75715e">#&gt; 10  1880 F     Sarah      1288</span>
<span style="color:#75715e">#&gt; # ... with 1,924,655 more rows</span>
babynames <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(year<span style="color:#f92672">:</span>n)
<span style="color:#75715e">#&gt; # A tibble: 1,924,665 x 4</span>
<span style="color:#75715e">#&gt;     year sex   name          n</span>
<span style="color:#75715e">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;</span>
<span style="color:#75715e">#&gt;  1  1880 F     Mary       7065</span>
<span style="color:#75715e">#&gt;  2  1880 F     Anna       2604</span>
<span style="color:#75715e">#&gt;  3  1880 F     Emma       2003</span>
<span style="color:#75715e">#&gt;  4  1880 F     Elizabeth  1939</span>
<span style="color:#75715e">#&gt;  5  1880 F     Minnie     1746</span>
<span style="color:#75715e">#&gt;  6  1880 F     Margaret   1578</span>
<span style="color:#75715e">#&gt;  7  1880 F     Ida        1472</span>
<span style="color:#75715e">#&gt;  8  1880 F     Alice      1414</span>
<span style="color:#75715e">#&gt;  9  1880 F     Bertha     1320</span>
<span style="color:#75715e">#&gt; 10  1880 F     Sarah      1288</span>
<span style="color:#75715e">#&gt; # ... with 1,924,655 more rows</span>
<span style="color:#75715e"># starts_with(), ends_with(), contains()</span>

babynames <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">filter</span>(name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Hadley&#34;</span>)
<span style="color:#75715e">#&gt; # A tibble: 163 x 5</span>
<span style="color:#75715e">#&gt;     year sex   name       n      prop</span>
<span style="color:#75715e">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;     &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt;  1  1906 M     Hadley     6 0.0000416</span>
<span style="color:#75715e">#&gt;  2  1908 M     Hadley    16 0.0000962</span>
<span style="color:#75715e">#&gt;  3  1909 M     Hadley    14 0.0000792</span>
<span style="color:#75715e">#&gt;  4  1910 M     Hadley     5 0.0000240</span>
<span style="color:#75715e">#&gt;  5  1911 M     Hadley     9 0.0000373</span>
<span style="color:#75715e">#&gt;  6  1912 M     Hadley    11 0.0000244</span>
<span style="color:#75715e">#&gt;  7  1913 M     Hadley    10 0.0000186</span>
<span style="color:#75715e">#&gt;  8  1914 M     Hadley    15 0.0000220</span>
<span style="color:#75715e">#&gt;  9  1915 M     Hadley    14 0.0000159</span>
<span style="color:#75715e">#&gt; 10  1916 M     Hadley    14 0.0000152</span>
<span style="color:#75715e">#&gt; # ... with 153 more rows</span>
babynames <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">filter</span>(year <span style="color:#f92672">==</span> <span style="color:#ae81ff">1900</span>, sex <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;F&#34;</span>)
<span style="color:#75715e">#&gt; # A tibble: 2,224 x 5</span>
<span style="color:#75715e">#&gt;     year sex   name          n   prop</span>
<span style="color:#75715e">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt;  1  1900 F     Mary      16706 0.0526</span>
<span style="color:#75715e">#&gt;  2  1900 F     Helen      6343 0.0200</span>
<span style="color:#75715e">#&gt;  3  1900 F     Anna       6114 0.0192</span>
<span style="color:#75715e">#&gt;  4  1900 F     Margaret   5304 0.0167</span>
<span style="color:#75715e">#&gt;  5  1900 F     Ruth       4765 0.0150</span>
<span style="color:#75715e">#&gt;  6  1900 F     Elizabeth  4096 0.0129</span>
<span style="color:#75715e">#&gt;  7  1900 F     Florence   3920 0.0123</span>
<span style="color:#75715e">#&gt;  8  1900 F     Ethel      3896 0.0123</span>
<span style="color:#75715e">#&gt;  9  1900 F     Marie      3856 0.0121</span>
<span style="color:#75715e">#&gt; 10  1900 F     Lillian    3414 0.0107</span>
<span style="color:#75715e">#&gt; # ... with 2,214 more rows</span>
babynames <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">filter</span>(year <span style="color:#f92672">==</span> <span style="color:#ae81ff">2013</span>, sex <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;F&#34;</span>)
<span style="color:#75715e">#&gt; # A tibble: 19,231 x 5</span>
<span style="color:#75715e">#&gt;     year sex   name          n    prop</span>
<span style="color:#75715e">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt;  1  2013 F     Sophia    21213 0.0110 </span>
<span style="color:#75715e">#&gt;  2  2013 F     Emma      20936 0.0109 </span>
<span style="color:#75715e">#&gt;  3  2013 F     Olivia    18414 0.00957</span>
<span style="color:#75715e">#&gt;  4  2013 F     Isabella  17631 0.00916</span>
<span style="color:#75715e">#&gt;  5  2013 F     Ava       15249 0.00793</span>
<span style="color:#75715e">#&gt;  6  2013 F     Mia       13147 0.00683</span>
<span style="color:#75715e">#&gt;  7  2013 F     Emily     13124 0.00682</span>
<span style="color:#75715e">#&gt;  8  2013 F     Abigail   12405 0.00645</span>
<span style="color:#75715e">#&gt;  9  2013 F     Madison   10591 0.00551</span>
<span style="color:#75715e">#&gt; 10  2013 F     Elizabeth  9448 0.00491</span>
<span style="color:#75715e">#&gt; # ... with 19,221 more rows</span>

babynames <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">mutate</span>(
    first <span style="color:#f92672">=</span> <span style="color:#a6e22e">tolower</span>(<span style="color:#a6e22e">substr</span>(name, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>)),
    last <span style="color:#f92672">=</span> <span style="color:#a6e22e">substr</span>(name, <span style="color:#a6e22e">nchar</span>(name), <span style="color:#a6e22e">nchar</span>(name))
  )
<span style="color:#75715e">#&gt; # A tibble: 1,924,665 x 7</span>
<span style="color:#75715e">#&gt;     year sex   name          n   prop first last </span>
<span style="color:#75715e">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;</span>
<span style="color:#75715e">#&gt;  1  1880 F     Mary       7065 0.0724 m     y    </span>
<span style="color:#75715e">#&gt;  2  1880 F     Anna       2604 0.0267 a     a    </span>
<span style="color:#75715e">#&gt;  3  1880 F     Emma       2003 0.0205 e     a    </span>
<span style="color:#75715e">#&gt;  4  1880 F     Elizabeth  1939 0.0199 e     h    </span>
<span style="color:#75715e">#&gt;  5  1880 F     Minnie     1746 0.0179 m     e    </span>
<span style="color:#75715e">#&gt;  6  1880 F     Margaret   1578 0.0162 m     t    </span>
<span style="color:#75715e">#&gt;  7  1880 F     Ida        1472 0.0151 i     a    </span>
<span style="color:#75715e">#&gt;  8  1880 F     Alice      1414 0.0145 a     e    </span>
<span style="color:#75715e">#&gt;  9  1880 F     Bertha     1320 0.0135 b     a    </span>
<span style="color:#75715e">#&gt; 10  1880 F     Sarah      1288 0.0132 s     h    </span>
<span style="color:#75715e">#&gt; # ... with 1,924,655 more rows</span>

babynames <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">arrange</span>(<span style="color:#a6e22e">desc</span>(prop))
<span style="color:#75715e">#&gt; # A tibble: 1,924,665 x 5</span>
<span style="color:#75715e">#&gt;     year sex   name        n   prop</span>
<span style="color:#75715e">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt;  1  1880 M     John     9655 0.0815</span>
<span style="color:#75715e">#&gt;  2  1881 M     John     8769 0.0810</span>
<span style="color:#75715e">#&gt;  3  1880 M     William  9532 0.0805</span>
<span style="color:#75715e">#&gt;  4  1883 M     John     8894 0.0791</span>
<span style="color:#75715e">#&gt;  5  1881 M     William  8524 0.0787</span>
<span style="color:#75715e">#&gt;  6  1882 M     John     9557 0.0783</span>
<span style="color:#75715e">#&gt;  7  1884 M     John     9388 0.0765</span>
<span style="color:#75715e">#&gt;  8  1882 M     William  9298 0.0762</span>
<span style="color:#75715e">#&gt;  9  1886 M     John     9026 0.0758</span>
<span style="color:#75715e">#&gt; 10  1885 M     John     8756 0.0755</span>
<span style="color:#75715e">#&gt; # ... with 1,924,655 more rows</span>

babynames <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">summarise</span>(n <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(n))
<span style="color:#75715e">#&gt; # A tibble: 1 x 1</span>
<span style="color:#75715e">#&gt;           n</span>
<span style="color:#75715e">#&gt;       &lt;int&gt;</span>
<span style="color:#75715e">#&gt; 1 348120517</span></code></pre></div>
<h3 id="group-by">Group by</h3>

<p>分組指令不會影響到原來的資料</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">head</span>(mtcars)
<span style="color:#75715e">#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb</span>
<span style="color:#75715e">#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4</span>
<span style="color:#75715e">#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4</span>
<span style="color:#75715e">#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</span>
<span style="color:#75715e">#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1</span>
<span style="color:#75715e">#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2</span>
<span style="color:#75715e">#&gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</span>
<span style="color:#a6e22e">str</span>(mtcars)
<span style="color:#75715e">#&gt; &#39;data.frame&#39;:	32 obs. of  11 variables:</span>
<span style="color:#75715e">#&gt;  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...</span>
<span style="color:#75715e">#&gt;  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...</span>
<span style="color:#75715e">#&gt;  $ disp: num  160 160 108 258 360 ...</span>
<span style="color:#75715e">#&gt;  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...</span>
<span style="color:#75715e">#&gt;  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...</span>
<span style="color:#75715e">#&gt;  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...</span>
<span style="color:#75715e">#&gt;  $ qsec: num  16.5 17 18.6 19.4 17 ...</span>
<span style="color:#75715e">#&gt;  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...</span>
<span style="color:#75715e">#&gt;  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...</span>
<span style="color:#75715e">#&gt;  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...</span>
<span style="color:#75715e">#&gt;  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</span>
by_cyl <span style="color:#f92672">&lt;-</span> mtcars <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">group_by</span>(cyl)
<span style="color:#a6e22e">head</span>(by_cyl)
<span style="color:#75715e">#&gt; # A tibble: 6 x 11</span>
<span style="color:#75715e">#&gt; # Groups:   cyl [3]</span>
<span style="color:#75715e">#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span style="color:#75715e">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1  21       6   160   110  3.9   2.62  16.5     0     1     4     4</span>
<span style="color:#75715e">#&gt; 2  21       6   160   110  3.9   2.88  17.0     0     1     4     4</span>
<span style="color:#75715e">#&gt; 3  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1</span>
<span style="color:#75715e">#&gt; 4  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1</span>
<span style="color:#75715e">#&gt; 5  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2</span>
<span style="color:#75715e">#&gt; 6  18.1     6   225   105  2.76  3.46  20.2     1     0     3     1</span>
<span style="color:#a6e22e">str</span>(by_cyl)
<span style="color:#75715e">#&gt; tibble [32 x 11] (S3: grouped_df/tbl_df/tbl/data.frame)</span>
<span style="color:#75715e">#&gt;  $ mpg : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...</span>
<span style="color:#75715e">#&gt;  $ cyl : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...</span>
<span style="color:#75715e">#&gt;  $ disp: num [1:32] 160 160 108 258 360 ...</span>
<span style="color:#75715e">#&gt;  $ hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...</span>
<span style="color:#75715e">#&gt;  $ drat: num [1:32] 3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...</span>
<span style="color:#75715e">#&gt;  $ wt  : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...</span>
<span style="color:#75715e">#&gt;  $ qsec: num [1:32] 16.5 17 18.6 19.4 17 ...</span>
<span style="color:#75715e">#&gt;  $ vs  : num [1:32] 0 0 1 1 0 1 0 1 1 1 ...</span>
<span style="color:#75715e">#&gt;  $ am  : num [1:32] 1 1 1 0 0 0 0 0 0 0 ...</span>
<span style="color:#75715e">#&gt;  $ gear: num [1:32] 4 4 4 3 3 3 3 4 4 4 ...</span>
<span style="color:#75715e">#&gt;  $ carb: num [1:32] 4 4 1 1 2 1 4 2 2 4 ...</span>
<span style="color:#75715e">#&gt;  - attr(*, &#34;groups&#34;)= tibble [3 x 2] (S3: tbl_df/tbl/data.frame)</span>
<span style="color:#75715e">#&gt;   ..$ cyl  : num [1:3] 4 6 8</span>
<span style="color:#75715e">#&gt;   ..$ .rows: list&lt;int&gt; [1:3] </span>
<span style="color:#75715e">#&gt;   .. ..$ : int [1:11] 3 8 9 18 19 20 21 26 27 28 ...</span>
<span style="color:#75715e">#&gt;   .. ..$ : int [1:7] 1 2 4 6 10 11 30</span>
<span style="color:#75715e">#&gt;   .. ..$ : int [1:14] 5 7 12 13 14 15 16 17 22 23 ...</span>
<span style="color:#75715e">#&gt;   .. ..@ ptype: int(0) </span>
<span style="color:#75715e">#&gt;   ..- attr(*, &#34;.drop&#34;)= logi TRUE</span></code></pre></div>
<p>但是分組結果會影響其他dplyr指令的計算結果:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">by_cyl <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">summarise</span>(
  disp <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(disp),
  hp <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(hp)
)
<span style="color:#75715e">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span style="color:#75715e">#&gt; # A tibble: 3 x 3</span>
<span style="color:#75715e">#&gt;     cyl  disp    hp</span>
<span style="color:#75715e">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1     4  105.  82.6</span>
<span style="color:#75715e">#&gt; 2     6  183. 122. </span>
<span style="color:#75715e">#&gt; 3     8  353. 209.</span>
by_cyl <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">filter</span>(disp <span style="color:#f92672">==</span> <span style="color:#a6e22e">max</span>(disp))
<span style="color:#75715e">#&gt; # A tibble: 3 x 11</span>
<span style="color:#75715e">#&gt; # Groups:   cyl [3]</span>
<span style="color:#75715e">#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span style="color:#75715e">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1</span>
<span style="color:#75715e">#&gt; 2  24.4     4  147.    62  3.69  3.19  20       1     0     4     2</span>
<span style="color:#75715e">#&gt; 3  10.4     8  472    205  2.93  5.25  18.0     0     0     3     4</span></code></pre></div>
<h3 id="summarize">summarize()</h3>

<p>What other summary functions can we use inside the summarize() verb? Any function in R that takes a vector of values and returns just one. Here are just a few:</p>

<p>mean(): the mean AKA the average<br />
sd(): the standard deviation, which is a measure of spread<br />
min() and max(): the minimum and maximum values respectively<br />
IQR(): Interquartile range<br />
sum(): the sum<br />
n(): a count of the number of rows/observations in each group. This particular summary function will make more sense when group_by() is covered in Section 5.5.</p>

<h4 id="實驗-pipeline-vs-no-pipeline">實驗 pipeline vs no pipeline</h4>

<p>產生資料</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">year<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1990</span>,	<span style="color:#ae81ff">1991</span>,	<span style="color:#ae81ff">1990</span>,	<span style="color:#ae81ff">1991</span>,	<span style="color:#ae81ff">1990</span>,	<span style="color:#ae81ff">1991</span>,	<span style="color:#ae81ff">1990</span>,	<span style="color:#ae81ff">1991</span>,	<span style="color:#ae81ff">1990</span>,	<span style="color:#ae81ff">1991</span>) 
sex<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;f&#34;</span>,	<span style="color:#e6db74">&#34;f&#34;</span>,	<span style="color:#e6db74">&#34;f&#34;</span>,	<span style="color:#e6db74">&#34;f&#34;</span>,	<span style="color:#e6db74">&#34;f&#34;</span>,	<span style="color:#e6db74">&#34;m&#34;</span>,	<span style="color:#e6db74">&#34;m&#34;</span>,	<span style="color:#e6db74">&#34;m&#34;</span>,	<span style="color:#e6db74">&#34;m&#34;</span>,	<span style="color:#e6db74">&#34;m&#34;</span>)
<span style="color:#75715e">#value=c(1,	2,	3,	4,	5,	1,	2,	3,	4,	5)</span>
value<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,	<span style="color:#ae81ff">2</span>,	<span style="color:#ae81ff">3</span>,	<span style="color:#ae81ff">4</span>,	<span style="color:#ae81ff">5</span>,	<span style="color:#ae81ff">6</span>,	<span style="color:#ae81ff">7</span>,	<span style="color:#ae81ff">8</span>,	<span style="color:#ae81ff">9</span>,	<span style="color:#ae81ff">10</span>)
df<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">data.frame</span>(sex,year,value)
<span style="color:#a6e22e">head</span>(df)
<span style="color:#75715e">#&gt;   sex year value</span>
<span style="color:#75715e">#&gt; 1   f 1990     1</span>
<span style="color:#75715e">#&gt; 2   f 1991     2</span>
<span style="color:#75715e">#&gt; 3   f 1990     3</span>
<span style="color:#75715e">#&gt; 4   f 1991     4</span>
<span style="color:#75715e">#&gt; 5   f 1990     5</span>
<span style="color:#75715e">#&gt; 6   m 1991     6</span></code></pre></div>
<h4 id="不用-pipeline">不用 pipeline</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">df<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">group_by</span>(df,sex)
ndf<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">mutate</span>(df,rank<span style="color:#f92672">=</span><span style="color:#a6e22e">min_rank</span>(value))
<span style="color:#a6e22e">arrange</span>(ndf,sex)
<span style="color:#75715e">#&gt; # A tibble: 10 x 4</span>
<span style="color:#75715e">#&gt; # Groups:   sex [2]</span>
<span style="color:#75715e">#&gt;    sex    year value  rank</span>
<span style="color:#75715e">#&gt;    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;</span>
<span style="color:#75715e">#&gt;  1 f      1990     1     1</span>
<span style="color:#75715e">#&gt;  2 f      1991     2     2</span>
<span style="color:#75715e">#&gt;  3 f      1990     3     3</span>
<span style="color:#75715e">#&gt;  4 f      1991     4     4</span>
<span style="color:#75715e">#&gt;  5 f      1990     5     5</span>
<span style="color:#75715e">#&gt;  6 m      1991     6     1</span>
<span style="color:#75715e">#&gt;  7 m      1990     7     2</span>
<span style="color:#75715e">#&gt;  8 m      1991     8     3</span>
<span style="color:#75715e">#&gt;  9 m      1990     9     4</span>
<span style="color:#75715e">#&gt; 10 m      1991    10     5</span></code></pre></div>
<h4 id="使用-pipeline">使用 pipeline</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">ndf<span style="color:#f92672">&lt;-</span>df <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">group_by</span>(sex) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">mutate</span>(rank <span style="color:#f92672">=</span> <span style="color:#a6e22e">min_rank</span>(value)) 

<span style="color:#a6e22e">arrange</span>(ndf,sex)
<span style="color:#75715e">#&gt; # A tibble: 10 x 4</span>
<span style="color:#75715e">#&gt; # Groups:   sex [2]</span>
<span style="color:#75715e">#&gt;    sex    year value  rank</span>
<span style="color:#75715e">#&gt;    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;</span>
<span style="color:#75715e">#&gt;  1 f      1990     1     1</span>
<span style="color:#75715e">#&gt;  2 f      1991     2     2</span>
<span style="color:#75715e">#&gt;  3 f      1990     3     3</span>
<span style="color:#75715e">#&gt;  4 f      1991     4     4</span>
<span style="color:#75715e">#&gt;  5 f      1990     5     5</span>
<span style="color:#75715e">#&gt;  6 m      1991     6     1</span>
<span style="color:#75715e">#&gt;  7 m      1990     7     2</span>
<span style="color:#75715e">#&gt;  8 m      1991     8     3</span>
<span style="color:#75715e">#&gt;  9 m      1990     9     4</span>
<span style="color:#75715e">#&gt; 10 m      1991    10     5</span></code></pre></div>
<p>問題:<br />
1. 如何知道min-rank(value)中的value 是全局或是欄位?<br />
hint: rm(value)<br />
2. 會出現甚麼結果</p>

<p>df %&gt;%<br />
  group_by(sex) %&gt;%str()</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">nb <span style="color:#f92672">&lt;-</span>babynames <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">group_by</span>(name)</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">babynames <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">group_by</span>(name) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">summarise</span>(n <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(n))
<span style="color:#75715e">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span style="color:#75715e">#&gt; # A tibble: 97,310 x 2</span>
<span style="color:#75715e">#&gt;    name          n</span>
<span style="color:#75715e">#&gt;    &lt;chr&gt;     &lt;int&gt;</span>
<span style="color:#75715e">#&gt;  1 Aaban       107</span>
<span style="color:#75715e">#&gt;  2 Aabha        35</span>
<span style="color:#75715e">#&gt;  3 Aabid        10</span>
<span style="color:#75715e">#&gt;  4 Aabir         5</span>
<span style="color:#75715e">#&gt;  5 Aabriella    32</span>
<span style="color:#75715e">#&gt;  6 Aada          5</span>
<span style="color:#75715e">#&gt;  7 Aadam       254</span>
<span style="color:#75715e">#&gt;  8 Aadan       130</span>
<span style="color:#75715e">#&gt;  9 Aadarsh     199</span>
<span style="color:#75715e">#&gt; 10 Aaden      4658</span>
<span style="color:#75715e">#&gt; # ... with 97,300 more rows</span>
  
babynames <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">filter</span>(name <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;John&#34;</span>, <span style="color:#e6db74">&#34;Mary&#34;</span>, <span style="color:#e6db74">&#34;William&#34;</span>)) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">group_by</span>(name, sex) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">summarise</span>(n <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(n))
<span style="color:#75715e">#&gt; `summarise()` regrouping output by &#39;name&#39; (override with `.groups` argument)</span>
<span style="color:#75715e">#&gt; # A tibble: 6 x 3</span>
<span style="color:#75715e">#&gt; # Groups:   name [3]</span>
<span style="color:#75715e">#&gt;   name    sex         n</span>
<span style="color:#75715e">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;int&gt;</span>
<span style="color:#75715e">#&gt; 1 John    F       21676</span>
<span style="color:#75715e">#&gt; 2 John    M     5115466</span>
<span style="color:#75715e">#&gt; 3 Mary    F     4123200</span>
<span style="color:#75715e">#&gt; 4 Mary    M       15160</span>
<span style="color:#75715e">#&gt; 5 William F       15949</span>
<span style="color:#75715e">#&gt; 6 William M     4102604</span>

babynames <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">group_by</span>(year, sex) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">mutate</span>(rank <span style="color:#f92672">=</span> <span style="color:#a6e22e">min_rank</span>(<span style="color:#a6e22e">desc</span>(n))) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">tail</span>()
<span style="color:#75715e">#&gt; # A tibble: 6 x 6</span>
<span style="color:#75715e">#&gt; # Groups:   year, sex [1]</span>
<span style="color:#75715e">#&gt;    year sex   name       n       prop  rank</span>
<span style="color:#75715e">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;      &lt;dbl&gt; &lt;int&gt;</span>
<span style="color:#75715e">#&gt; 1  2017 M     Zyhier     5 0.00000255 12171</span>
<span style="color:#75715e">#&gt; 2  2017 M     Zykai      5 0.00000255 12171</span>
<span style="color:#75715e">#&gt; 3  2017 M     Zykeem     5 0.00000255 12171</span>
<span style="color:#75715e">#&gt; 4  2017 M     Zylin      5 0.00000255 12171</span>
<span style="color:#75715e">#&gt; 5  2017 M     Zylis      5 0.00000255 12171</span>
<span style="color:#75715e">#&gt; 6  2017 M     Zyrie      5 0.00000255 12171</span></code></pre></div>
<h4 id="combining-to-answer-more-complex-questions">Combining to answer more complex questions &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</h4>

<h5 id="how-many-hadley-s">How many Hadley&rsquo;s?</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">babynames <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">filter</span>(name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Hadley&#34;</span>) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">group_by</span>(sex) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">summarise</span>(n <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(n))
<span style="color:#75715e">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span style="color:#75715e">#&gt; # A tibble: 2 x 2</span>
<span style="color:#75715e">#&gt;   sex       n</span>
<span style="color:#75715e">#&gt;   &lt;chr&gt; &lt;int&gt;</span>
<span style="color:#75715e">#&gt; 1 F     26708</span>
<span style="color:#75715e">#&gt; 2 M      1883</span></code></pre></div>
<h5 id="the-travesty">The travesty</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(ggplot2)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Attaching package: &#39;ggplot2&#39;</span>
<span style="color:#75715e">#&gt; The following object is masked _by_ &#39;.GlobalEnv&#39;:</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt;     %+%</span>
<span style="color:#75715e">#&gt; The following object is masked from &#39;mtcars&#39;:</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt;     mpg</span>
babynames <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">filter</span>(name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Hadley&#34;</span>) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(year, n)) <span style="color:#f92672">+</span> 
    <span style="color:#a6e22e">geom_line</span>(<span style="color:#a6e22e">aes</span>(colour <span style="color:#f92672">=</span> sex))</code></pre></div>
<p><img src="../post/TidyBasic01_files/figure-html/unnamed-chunk-22-1.png" alt="plot of chunk unnamed-chunk-22" /></p>


<footer class="footline">
	
</footer>

        
        </div>
        
rlang\TidyBasic01.md
      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
		
			<a class="nav nav-next" href="../rlang.html" title="R language" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../js/clipboard.min.js?1606367337"></script>
    <script src="../js/perfect-scrollbar.min.js?1606367337"></script>
    <script src="../js/perfect-scrollbar.jquery.min.js?1606367337"></script>
    <script src="../js/jquery.sticky.js?1606367337"></script>
    <script src="../js/featherlight.min.js?1606367337"></script>
    <script src="../js/highlight.pack.js?1606367337"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../js/modernizr.custom-3.6.0.js?1606367337"></script>
    <script src="../js/learn.js?1606367337"></script>
    <script src="../js/hugo-learn.js?1606367337"></script>
    
        
            <script src="../mermaid/mermaid.js?1606367337"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    



  </body>
</html>

